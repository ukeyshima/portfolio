(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{83:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(3),i=n.n(o),u=n(4),c=n.n(u),l=n(5),s=n.n(l),f=n(6),d=n.n(f),R=n(0),E=n.n(R),A=n(24),F=n.n(A),h=n(930),m=n.n(h),v=n(931),b=n.n(v),B=function(e,t,n,r){var a=function(e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;alert(t.getShaderInfoLog(r)),console.log(t.getShaderInfoLog(r))},o=function(e){var n=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),n},i=function(e,n){var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,n),t.transformFeedbackVaryings(r,["outPosition","outVelocity","outExistenceFrame","outAccel"],t.SEPARATE_ATTRIBS),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?(t.useProgram(r),r):null}(a(n,t.VERTEX_SHADER),a(r,t.FRAGMENT_SHADER)),u=[];u[0]=t.getUniformLocation(i,"pointSize"),u[1]=t.getUniformLocation(i,"frame"),u[2]=t.getUniformLocation(i,"resolution");for(var c=new Array(3e3).fill(0),l=[],s=[],f=new Array(3e3).fill(0),d=new Array(3e3).fill(0),R=new Array(1e3).fill(0),E=0;E<1e3;E++)s[E]=E,l[3*E]=Math.random()>.5?258e-7-1e-6*Math.random():1e-6*Math.random()-258e-7,l[3*E+1]=5e-5*Math.random(),l[3*E+2]=Math.random()>.5?258e-7-1e-6*Math.random():1e-6*Math.random()-258e-7;var A=[],F=[],h=o(c);A[0]=t.getAttribLocation(i,"position"),F[0]=3;var m=o(l);A[1]=t.getAttribLocation(i,"doubleAccel"),F[1]=3;var v=o(s);A[2]=t.getAttribLocation(i,"number"),F[2]=1;var b=o(f);A[3]=t.getAttribLocation(i,"velocity"),F[3]=3;var B=o(R);A[4]=t.getAttribLocation(i,"existenceFrame"),F[4]=1;var _=o(d);A[5]=t.getAttribLocation(i,"accel"),F[5]=3;var g,p=[t.createBuffer(),t.createBuffer(),t.createBuffer(),t.createBuffer()],T=[t.createTransformFeedback(),t.createTransformFeedback(),t.createTransformFeedback(),t.createTransformFeedback()];t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,T[0]),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,T[1]),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,T[2]),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,T[3]),t.bindBuffer(t.ARRAY_BUFFER,p[0]),t.bufferData(t.ARRAY_BUFFER,3*Float32Array.BYTES_PER_ELEMENT*1e3,t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,p[1]),t.bufferData(t.ARRAY_BUFFER,3*Float32Array.BYTES_PER_ELEMENT*1e3,t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,p[2]),t.bufferData(t.ARRAY_BUFFER,1e3*Float32Array.BYTES_PER_ELEMENT,t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ARRAY_BUFFER,p[3]),t.bufferData(t.ARRAY_BUFFER,3*Float32Array.BYTES_PER_ELEMENT*1e3,t.DYNAMIC_COPY),t.bindBuffer(t.ARRAY_BUFFER,null),t.activeTexture(t.TEXTURE0),function(){var e=document.createElement("canvas");e.width=300,e.height=300;var n=e.getContext("2d");n.beginPath();var r=n.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);r.addColorStop(0,"rgba(255,10,0,0.8)"),r.addColorStop(.5,"rgba(200,100,0,0.2)"),r.addColorStop(.9,"rgba(100,100,000,0.1)"),r.addColorStop(1,"rgba(255,255,255,0.0)"),n.fillStyle=r,n.arc(e.width/2,e.height/2,e.width/2,0,2*Math.PI,!1),n.fill();var a=new Image;a.addEventListener("load",function(){var e=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),g=e}),a.src=e.toDataURL("image/png",1)}(),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE),t.clearColor(242/255,242/255,232/255,1);var C=0;return function(){var n,r;t.clear(t.COLOR_BUFFER_BIT),t.bindTexture(t.TEXTURE_2D,g),t.uniform1f(u[0],10+(e.width-150)/50),t.uniform1f(u[1],C),t.uniform2fv(u[2],[e.width,e.height]),n=A,r=F,[h,m,v,b,B,_].forEach(function(e,a,o){t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n[a]),t.vertexAttribPointer(n[a],r[a],t.FLOAT,!1,0,0)}),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,p[0]),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,1,p[1]),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,2,p[2]),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,3,p[3]),t.beginTransformFeedback(t.POINTS),t.drawArrays(t.POINTS,0,1e3),t.endTransformFeedback(),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,0,null),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,1,null),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,2,null),t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,3,null);var a=h;h=p[0],p[0]=a;var o=b;b=p[1],p[1]=o;var i=B;B=p[2],p[2]=i;var c=_;_=p[3],p[3]=c,t.flush(),C++}},_=function(e){function t(e){var n;return a()(this,t),(n=c()(this,s()(t).call(this,e))).requestId=0,n}return d()(t,e),i()(t,[{key:"componentDidMount",value:function(){this.updateCanvas()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.requestId)}},{key:"updateCanvas",value:function(){var e=this;this.canvas.width=this.props.style.width,this.canvas.height=this.props.style.height,this.gl=this.canvas.getContext("webgl2");var t=B(this.canvas,this.gl,m()(),b()());!function n(){t(),e.requestId=requestAnimationFrame(n)}()}},{key:"handleResize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.gl.viewport(0,0,e,t)}},{key:"render",value:function(){var e=this;return E.a.createElement("canvas",F()({},this.props,{ref:function(t){e.canvas=t}}))}}]),t}(E.a.Component),g=n(932),p=n.n(g);n.d(t,"default",function(){return T});var T=function(e){function t(e){var n;return a()(this,t),(n=c()(this,s()(t).call(this,e))).state={width:window.innerWidth,height:window.innerHeight},n}return d()(t,e),i()(t,[{key:"componentDidMount",value:function(){p.a.use(),this.tempHandleResize=this.handleResize.bind(this),window.addEventListener("resize",this.tempHandleResize)}},{key:"componentWillUnmount",value:function(){p.a.unuse(),window.removeEventListener("resize",this.tempHandleResize)}},{key:"handleResize",value:function(e){var t=e.target.innerWidth,n=e.target.innerHeight;this.refs.createCanvas.handleResize(t,n),this.setState({width:t,height:n})}},{key:"render",value:function(){return E.a.createElement(_,{ref:"createCanvas",style:{width:this.state.width,height:this.state.height}})}}]),t}(E.a.Component)},930:function(e,t){e.exports=function(){return["#version 300 es","layout (location=0)in vec3 position;","layout (location=1)in vec3 doubleAccel;","layout (location=2)in float number;","layout (location=3)in vec3 velocity; ","layout (location=4)in float existenceFrame;","layout (location=5)in vec3 accel;","uniform float pointSize;","uniform float frame;","uniform vec2 resolution;","out vec3 outPosition;","out vec3 outVelocity;","out float outExistenceFrame;","out vec3 outAccel;"," float rand(float co){","    return fract(sin(co*32.233) * 75.545);","}","void main(void){","    vec3 p=position.xyz;","   if(p.x>1.0||p.x<-1.0||p.y>1.0){","        vec3 a=vec3(0.0);","        a.x=doubleAccel.x>0.0?(-0.0018-(rand(number*0.01)*0.0001)):(0.0018+(rand(number*0.01)*0.0001));","        a.z=doubleAccel.z>0.0?(-0.0018-(rand(number*0.03)*0.0001)):(0.0018+(rand(number*0.03)*0.0001));","        outAccel=a;","        outExistenceFrame=0.0;","        vec3 v=vec3(0.0);","        v.x=a.x<0.0?0.048-(rand(number*0.02)*0.04):-0.048+(rand(number*0.02)*0.04);","        v.y=0.03-rand(number*0.01)*0.02;","        v.z=a.z<0.0?0.048-(rand(number*0.04)*0.04):-0.048+(rand(number*0.04)*0.04);","        outVelocity=v;","        outPosition=vec3((rand(number*0.06)*2.0-1.0)*0.1,-0.8+(rand(number*0.05)*2.0-1.0)*0.1,(rand(number*0.06)*2.0-1.0)*0.1);","    }else{","        outExistenceFrame=existenceFrame+1.0;","        outAccel=accel+doubleAccel;","        outVelocity=velocity+outAccel;","        outPosition=position+outVelocity;","    }","    gl_Position=vec4(outPosition,1.0);","    gl_PointSize=pointSize*rand(number*0.1)+existenceFrame/3.0;","}"].join("\n")}},931:function(e,t){e.exports=function(){return["#version 300 es","    precision highp float;","    uniform vec2 resolution;","    uniform float frame;","    uniform sampler2D tex;","    out vec4 outColor;","    in float outExistenceFrame;","    in vec3 outPosition;","float rand(float co){","    return fract(sin(co*78.233) * 435.5453);","}","void main(void){","    vec2 p=(gl_FragCoord.xy*2.0-resolution)/min(resolution.x,resolution.y);","    vec4 smpColor=texture(tex, gl_PointCoord);","    smpColor.g=4.0*sqrt(0.001-pow(outPosition.x,2.0)*pow(outPosition.y+0.9,2.0));","    smpColor*=outExistenceFrame/20.0;","    smpColor.a*=1.0-outExistenceFrame/50.0;","    smpColor.a*=4.0*sqrt(0.5-pow(outPosition.x,2.0));","    if(smpColor.a==0.0)discard;","    else outColor=smpColor+rand(p.y*frame)*0.2;","}"].join("\n")}},932:function(e,t,n){var r,a=0,o=n(933);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(t.locals=o.locals),t.use=t.ref=function(){return a++||(r=n(23)(o,{hmr:!0})),t},t.unuse=t.unref=function(){a>0&&!--a&&(r(),r=null)}},933:function(e,t,n){(e.exports=n(22)(!1)).push([e.i,"body {\n  margin: 0;\n  padding: 0;\n  overflow: hidden; }\n\n#root {\n  font-size: 0; }\n",""])}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFydGljbGVGbGFtZS9jcmVhdGVDYW52YXMuanN4Iiwid2VicGFjazovLy8uL3NyYy9wYXJ0aWNsZUZsYW1lL21haW4uanN4Iiwid2VicGFjazovLy8uL3NyYy9wYXJ0aWNsZUZsYW1lL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovLy8uL3NyYy9wYXJ0aWNsZUZsYW1lL2ZyYWdtZW50U2hhZGVyLmdsc2wiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhcnRpY2xlRmxhbWUvc3R5bGUuc2Nzcz8yY2M4Iiwid2VicGFjazovLy8uL3NyYy9wYXJ0aWNsZUZsYW1lL3N0eWxlLnNjc3MiXSwibmFtZXMiOlsid2ViR0xTdGFydCIsImNhbnZhcyIsImdsIiwidnMiLCJmcyIsImNyZWF0ZV9zaGFkZXIiLCJ0ZXh0IiwidHlwZSIsInNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImFsZXJ0IiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvbnNvbGUiLCJsb2ciLCJjcmVhdGVfdmJvIiwiZGF0YSIsInZibyIsImNyZWF0ZUJ1ZmZlciIsImJpbmRCdWZmZXIiLCJBUlJBWV9CVUZGRVIiLCJidWZmZXJEYXRhIiwiRmxvYXQzMkFycmF5IiwiRFlOQU1JQ19DT1BZIiwicHJnIiwicHJvZ3JhbSIsImNyZWF0ZVByb2dyYW0iLCJhdHRhY2hTaGFkZXIiLCJ0cmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmdzIiwiU0VQQVJBVEVfQVRUUklCUyIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwidXNlUHJvZ3JhbSIsImNyZWF0ZV9wcm9ncmFtIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInVuaUxvY2F0aW9uIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwicG9zaXRpb24iLCJBcnJheSIsInBhcnRpY2xlTnVtIiwiZmlsbCIsImRvdWJsZUFjY2VsIiwibnVtYmVyIiwidmVsb2NpdHkiLCJhY2NlbCIsImV4aXN0ZW5jZUZyYW1lIiwiaSIsIk1hdGgiLCJyYW5kb20iLCJhdHRMb2NhdGlvbiIsImF0dFN0cmlkZSIsInZQb3NpdGlvbiIsImdldEF0dHJpYkxvY2F0aW9uIiwidkRvdWJsZUFjY2VsIiwidk51bWJlciIsInZWZWxvY2l0eSIsInZFeGlzdGVuY2VGcmFtZSIsInZBY2NlbCIsInRleHR1cmUiLCJ2VHJhbnNmb3JtRmVlZGJhY2siLCJ0cmFuc2Zvcm1GZWVkYmFjayIsImNyZWF0ZVRyYW5zZm9ybUZlZWRiYWNrIiwiYmluZFRyYW5zZm9ybUZlZWRiYWNrIiwiVFJBTlNGT1JNX0ZFRURCQUNLIiwiQllURVNfUEVSX0VMRU1FTlQiLCJhY3RpdmVUZXh0dXJlIiwiVEVYVFVSRTAiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJiZWdpblBhdGgiLCJncmFkIiwiY3JlYXRlUmFkaWFsR3JhZGllbnQiLCJhZGRDb2xvclN0b3AiLCJmaWxsU3R5bGUiLCJhcmMiLCJQSSIsImltZyIsIkltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRleCIsImNyZWF0ZVRleHR1cmUiLCJiaW5kVGV4dHVyZSIsIlRFWFRVUkVfMkQiLCJ0ZXhJbWFnZTJEIiwiUkdCQSIsIlVOU0lHTkVEX0JZVEUiLCJnZW5lcmF0ZU1pcG1hcCIsInNyYyIsInRvRGF0YVVSTCIsImNyZWF0ZV90ZXh0dXJlIiwiZW5hYmxlIiwiQkxFTkQiLCJibGVuZEZ1bmNTZXBhcmF0ZSIsIlNSQ19BTFBIQSIsIk9ORV9NSU5VU19TUkNfQUxQSEEiLCJPTkUiLCJjbGVhckNvbG9yIiwiZnJhbWUiLCJhdHRMIiwiYXR0UyIsImNsZWFyIiwiQ09MT1JfQlVGRkVSX0JJVCIsInVuaWZvcm0xZiIsInVuaWZvcm0yZnYiLCJmb3JFYWNoIiwiZSIsImEiLCJlbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSIsInZlcnRleEF0dHJpYlBvaW50ZXIiLCJGTE9BVCIsImJpbmRCdWZmZXJCYXNlIiwiVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiIsImJlZ2luVHJhbnNmb3JtRmVlZGJhY2siLCJQT0lOVFMiLCJkcmF3QXJyYXlzIiwiZW5kVHJhbnNmb3JtRmVlZGJhY2siLCJ0ZW1wIiwidGVtcDIiLCJ0ZW1wMyIsInRlbXA0IiwiZmx1c2giLCJDcmVhdGVDYW52YXMiLCJwcm9wcyIsIl90aGlzIiwiY2xhc3NDYWxsQ2hlY2tfZGVmYXVsdCIsInRoaXMiLCJwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuX2RlZmF1bHQiLCJnZXRQcm90b3R5cGVPZl9kZWZhdWx0IiwiY2FsbCIsInJlcXVlc3RJZCIsInVwZGF0ZUNhbnZhcyIsImNhbmNlbEFuaW1hdGlvbkZyYW1lIiwiX3RoaXMyIiwic3R5bGUiLCJyZW5kZXIiLCJ2ZXJ0IiwiZnJhZyIsImxvb3AiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3IiwiaCIsInZpZXdwb3J0IiwiX3RoaXMzIiwicmVhY3RfZGVmYXVsdCIsImV4dGVuZHNfZGVmYXVsdCIsInJlZiIsIlJlYWN0IiwiQ29tcG9uZW50IiwiUGFydGljbGVGbGFtZSIsInN0YXRlIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwidXNlIiwidGVtcEhhbmRsZVJlc2l6ZSIsImhhbmRsZVJlc2l6ZSIsImJpbmQiLCJ1bnVzZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJyZWZzIiwiY3JlYXRlQ2FudmFzIiwic2V0U3RhdGUiLCJtb2R1bGUiLCJleHBvcnRzIiwiam9pbiIsImRpc3Bvc2UiLCJjb250ZW50IiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImxvY2FscyIsImhtciIsInVucmVmIiwicHVzaCJdLCJtYXBwaW5ncyI6IjBQQUdNQSxFQUFhLFNBQUNDLEVBQVFDLEVBQUlDLEVBQUlDLEdBQ2hDLElBYU1DLEVBQWdCLFNBQUNDLEVBQU1DLEdBQ3pCLElB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cUJBQXFCLHlCQUF5Qiw2Q0FBNkMsSUFBSSxtQkFBbUIsMkJBQTJCLHFDQUFxQyw0QkFBNEIsMEdBQTBHLDBHQUEwRyxzQkFBc0IsaUNBQWlDLDRCQUE0QixzRkFBc0YsMkNBQTJDLHNGQUFzRix5QkFBeUIsa0lBQWtJLGFBQWEsZ0RBQWdELHNDQUFzQyx5Q0FBeUMsNENBQTRDLFFBQVEseUNBQXlDLGtFQUFrRSxLQUFJQyxLQUFBLDBCQ0F2bERGLEVBQUFDLFFBQUEsV0FBNEIsc0RBQXFELCtCQUErQiwyQkFBMkIsNkJBQTZCLHlCQUF5QixrQ0FBa0MsMkJBQTJCLHdCQUF3QiwrQ0FBK0MsSUFBSSxtQkFBbUIsOEVBQThFLGlEQUFpRCxvRkFBb0Ysd0NBQXdDLDhDQUE4Qyx3REFBd0Qsa0NBQWtDLGtEQUFrRCxLQUFJQyxLQUFBLDRCQ0FyeEIsSUFDQUMsRUFEQU4sRUFBQSxFQUVBTyxFQUFjQyxFQUFRLEtBRXRCLGlCQUFBRCxNQUFBLEVBQTRDSixFQUFBekgsRUFBUzZILEVBQUEsTUFDckRBLEVBQUFFLFNBQUFMLEVBQUFLLE9BQUFGLEVBQUFFLFFBRUFMLEVBQUFYLElBQUFXLEVBQUFuQixJQUFBLFdBS0EsT0FKQWUsTUFDQU0sRUFBWUUsRUFBUSxHQUFSQSxDQUEyREQsRUFBQSxDQUFZRyxLQUFBLEtBR25GTixHQUdBQSxFQUFBUCxNQUFBTyxFQUFBTyxNQUFBLFdBQ0FYLEVBQUEsTUFBQUEsSUFDQU0sSUFDQUEsRUFBQSw2QkNsQkFILEVBQUFDLFFBQTJCSSxFQUFRLEdBQVJBLEVBQXVELElBS2xGSSxLQUFBLENBQWNULEVBQUF6SCxFQUFTLDZGQUEyRiIsImZpbGUiOiIxMi5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdmVydCBmcm9tIFwiLi92ZXJ0ZXhTaGFkZXIuZ2xzbFwiO1xuaW1wb3J0IGZyYWcgZnJvbSBcIi4vZnJhZ21lbnRTaGFkZXIuZ2xzbFwiO1xuY29uc3Qgd2ViR0xTdGFydCA9IChjYW52YXMsIGdsLCB2cywgZnMpID0+IHtcbiAgICBjb25zdCBjcmVhdGVfcHJvZ3JhbSA9ICh2cywgZnMpID0+IHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZzKTtcbiAgICAgICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZzKTtcbiAgICAgICAgZ2wudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncyhwcm9ncmFtLCBbXCJvdXRQb3NpdGlvblwiLCBcIm91dFZlbG9jaXR5XCIsIFwib3V0RXhpc3RlbmNlRnJhbWVcIiwgXCJvdXRBY2NlbFwiXSwgZ2wuU0VQQVJBVEVfQVRUUklCUyk7XG4gICAgICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgICBpZiAoZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgICAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjcmVhdGVfc2hhZGVyID0gKHRleHQsIHR5cGUpID0+IHtcbiAgICAgICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCB0ZXh0KTtcbiAgICAgICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICBpZiAoZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgICAgICByZXR1cm4gc2hhZGVyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxlcnQoZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGNyZWF0ZV92Ym8gPSBkYXRhID0+IHtcbiAgICAgICAgY29uc3QgdmJvID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2Ym8pO1xuICAgICAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShkYXRhKSwgZ2wuRFlOQU1JQ19DT1BZKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xuICAgICAgICByZXR1cm4gdmJvO1xuICAgIH07XG4gICAgY29uc3QgY3JlYXRlX2libyA9IGRhdGEgPT4ge1xuICAgICAgICBjb25zdCBpYm8gPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaWJvKTtcbiAgICAgICAgZ2wuYnVmZmVyRGF0YShcbiAgICAgICAgICAgIGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLFxuICAgICAgICAgICAgbmV3IEludDE2QXJyYXkoZGF0YSksXG4gICAgICAgICAgICBnbC5TVEFUSUNfRFJBV1xuICAgICAgICApO1xuICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIGlibztcbiAgICB9O1xuICAgIGNvbnN0IHNldF9hdHRyaWJ1dGUgPSAodmJvLCBhdHRMLCBhdHRTKSA9PiB7XG4gICAgICAgIHZiby5mb3JFYWNoKChlLCBpLCBhKSA9PiB7XG4gICAgICAgICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZSk7XG4gICAgICAgICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRMW2ldKTtcbiAgICAgICAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0TFtpXSwgYXR0U1tpXSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBjb25zdCBjcmVhdGVfdGV4dHVyZSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gMzAwO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gMzAwO1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnN0IGdyYWQgPSBjdHguY3JlYXRlUmFkaWFsR3JhZGllbnQoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIsIDAsIGNhbnZhcy53aWR0aCAvIDIsIGNhbnZhcy5oZWlnaHQgLyAyLCBjYW52YXMud2lkdGggLyAyKTtcbiAgICAgICAgZ3JhZC5hZGRDb2xvclN0b3AoMCwgXCJyZ2JhKDI1NSwxMCwwLDAuOClcIik7XG4gICAgICAgIGdyYWQuYWRkQ29sb3JTdG9wKDAuNSwgXCJyZ2JhKDIwMCwxMDAsMCwwLjIpXCIpO1xuICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgwLjksIFwicmdiYSgxMDAsMTAwLDAwMCwwLjEpXCIpO1xuICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgxLCBcInJnYmEoMjU1LDI1NSwyNTUsMC4wKVwiKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGdyYWQ7XG4gICAgICAgIGN0eC5hcmMoY2FudmFzLndpZHRoIC8gMiwgY2FudmFzLmhlaWdodCAvIDIsIGNhbnZhcy53aWR0aCAvIDIsIDAsIE1hdGguUEkgKiAyLCBmYWxzZSk7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGV4ID0gZ2wuY3JlYXRlVGV4dHVyZSgpO1xuICAgICAgICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCk7XG4gICAgICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXgpO1xuICAgICAgICAgICAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBnbC5SR0JBLCBnbC5SR0JBLCBnbC5VTlNJR05FRF9CWVRFLCBpbWcpO1xuICAgICAgICAgICAgZ2wuZ2VuZXJhdGVNaXBtYXAoZ2wuVEVYVFVSRV8yRCk7XG4gICAgICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCBudWxsKTtcbiAgICAgICAgICAgIHRleHR1cmUgPSB0ZXg7XG4gICAgICAgIH0pO1xuICAgICAgICBpbWcuc3JjID0gY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiLCAxLjApO1xuICAgIH1cbiAgICBjb25zdCBwcmcgPSBjcmVhdGVfcHJvZ3JhbShcbiAgICAgICAgY3JlYXRlX3NoYWRlcih2cywgZ2wuVkVSVEVYX1NIQURFUiksXG4gICAgICAgIGNyZWF0ZV9zaGFkZXIoZnMsIGdsLkZSQUdNRU5UX1NIQURFUilcbiAgICApO1xuICAgIGNvbnN0IHVuaUxvY2F0aW9uID0gW107XG4gICAgdW5pTG9jYXRpb25bMF0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLCBcInBvaW50U2l6ZVwiKTtcbiAgICB1bmlMb2NhdGlvblsxXSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcmcsIFwiZnJhbWVcIik7XG4gICAgdW5pTG9jYXRpb25bMl0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLCBcInJlc29sdXRpb25cIik7XG5cbiAgICBjb25zdCBwYXJ0aWNsZU51bSA9IDEwMDA7XG4gICAgY29uc3QgcG9zaXRpb24gPSBuZXcgQXJyYXkocGFydGljbGVOdW0gKiAzKS5maWxsKDApO1xuICAgIGNvbnN0IGRvdWJsZUFjY2VsID0gW107XG4gICAgY29uc3QgbnVtYmVyID0gW107XG4gICAgY29uc3QgdmVsb2NpdHkgPSBuZXcgQXJyYXkocGFydGljbGVOdW0gKiAzKS5maWxsKDApO1xuICAgIGNvbnN0IGFjY2VsID0gbmV3IEFycmF5KHBhcnRpY2xlTnVtICogMykuZmlsbCgwKTtcbiAgICBjb25zdCBleGlzdGVuY2VGcmFtZSA9IG5ldyBBcnJheShwYXJ0aWNsZU51bSkuZmlsbCgwKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRpY2xlTnVtOyBpKyspIHtcbiAgICAgICAgbnVtYmVyW2ldID0gaTtcbiAgICAgICAgZG91YmxlQWNjZWxbaSAqIDNdID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IDAuMDAwMDI1OCAtIChNYXRoLnJhbmRvbSgpKSAqIDAuMDAwMDAxIDogLTAuMDAwMDI1OCArIChNYXRoLnJhbmRvbSgpKSAqIDAuMDAwMDAxO1xuICAgICAgICBkb3VibGVBY2NlbFtpICogMyArIDFdID0gMC4wMDAwNSAqIE1hdGgucmFuZG9tKCk7XG4gICAgICAgIGRvdWJsZUFjY2VsW2kgKiAzICsgMl0gPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gMC4wMDAwMjU4IC0gKE1hdGgucmFuZG9tKCkpICogMC4wMDAwMDEgOiAtMC4wMDAwMjU4ICsgKE1hdGgucmFuZG9tKCkpICogMC4wMDAwMDE7XG4gICAgfVxuXG4gICAgY29uc3QgYXR0TG9jYXRpb24gPSBbXTtcbiAgICBjb25zdCBhdHRTdHJpZGUgPSBbXTtcblxuICAgIGxldCB2UG9zaXRpb24gPSBjcmVhdGVfdmJvKHBvc2l0aW9uKTtcbiAgICBhdHRMb2NhdGlvblswXSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByZywgXCJwb3NpdGlvblwiKTtcbiAgICBhdHRTdHJpZGVbMF0gPSAzO1xuXG4gICAgbGV0IHZEb3VibGVBY2NlbCA9IGNyZWF0ZV92Ym8oZG91YmxlQWNjZWwpO1xuICAgIGF0dExvY2F0aW9uWzFdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCBcImRvdWJsZUFjY2VsXCIpO1xuICAgIGF0dFN0cmlkZVsxXSA9IDM7XG5cbiAgICBjb25zdCB2TnVtYmVyID0gY3JlYXRlX3ZibyhudW1iZXIpO1xuICAgIGF0dExvY2F0aW9uWzJdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCBcIm51bWJlclwiKTtcbiAgICBhdHRTdHJpZGVbMl0gPSAxO1xuXG4gICAgbGV0IHZWZWxvY2l0eSA9IGNyZWF0ZV92Ym8odmVsb2NpdHkpO1xuICAgIGF0dExvY2F0aW9uWzNdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCBcInZlbG9jaXR5XCIpO1xuICAgIGF0dFN0cmlkZVszXSA9IDM7XG5cbiAgICBsZXQgdkV4aXN0ZW5jZUZyYW1lID0gY3JlYXRlX3ZibyhleGlzdGVuY2VGcmFtZSk7XG4gICAgYXR0TG9jYXRpb25bNF0gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcmcsIFwiZXhpc3RlbmNlRnJhbWVcIik7XG4gICAgYXR0U3RyaWRlWzRdID0gMTtcblxuICAgIGxldCB2QWNjZWwgPSBjcmVhdGVfdmJvKGFjY2VsKTtcbiAgICBhdHRMb2NhdGlvbls1XSA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByZywgXCJhY2NlbFwiKTtcbiAgICBhdHRTdHJpZGVbNV0gPSAzO1xuXG4gICAgY29uc3QgdlRyYW5zZm9ybUZlZWRiYWNrID0gW2dsLmNyZWF0ZUJ1ZmZlcigpLCBnbC5jcmVhdGVCdWZmZXIoKSwgZ2wuY3JlYXRlQnVmZmVyKCksIGdsLmNyZWF0ZUJ1ZmZlcigpXTtcbiAgICBjb25zdCB0cmFuc2Zvcm1GZWVkYmFjayA9IFtnbC5jcmVhdGVUcmFuc2Zvcm1GZWVkYmFjaygpLCBnbC5jcmVhdGVUcmFuc2Zvcm1GZWVkYmFjaygpLCBnbC5jcmVhdGVUcmFuc2Zvcm1GZWVkYmFjaygpLCBnbC5jcmVhdGVUcmFuc2Zvcm1GZWVkYmFjaygpXTtcblxuICAgIGdsLmJpbmRUcmFuc2Zvcm1GZWVkYmFjayhnbC5UUkFOU0ZPUk1fRkVFREJBQ0ssIHRyYW5zZm9ybUZlZWRiYWNrWzBdKTtcbiAgICBnbC5iaW5kVHJhbnNmb3JtRmVlZGJhY2soZ2wuVFJBTlNGT1JNX0ZFRURCQUNLLCB0cmFuc2Zvcm1GZWVkYmFja1sxXSk7XG4gICAgZ2wuYmluZFRyYW5zZm9ybUZlZWRiYWNrKGdsLlRSQU5TRk9STV9GRUVEQkFDSywgdHJhbnNmb3JtRmVlZGJhY2tbMl0pO1xuICAgIGdsLmJpbmRUcmFuc2Zvcm1GZWVkYmFjayhnbC5UUkFOU0ZPUk1fRkVFREJBQ0ssIHRyYW5zZm9ybUZlZWRiYWNrWzNdKTtcblxuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2VHJhbnNmb3JtRmVlZGJhY2tbMF0pO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQgKiAzICogcGFydGljbGVOdW0sIGdsLkRZTkFNSUNfQ09QWSk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZUcmFuc2Zvcm1GZWVkYmFja1sxXSk7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCAqIDMgKiBwYXJ0aWNsZU51bSwgZ2wuRFlOQU1JQ19DT1BZKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG5cbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdlRyYW5zZm9ybUZlZWRiYWNrWzJdKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UICogcGFydGljbGVOdW0sIGdsLkRZTkFNSUNfQ09QWSk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xuXG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZUcmFuc2Zvcm1GZWVkYmFja1szXSk7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIEZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCAqIDMgKiBwYXJ0aWNsZU51bSwgZ2wuRFlOQU1JQ19DT1BZKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG5cbiAgICBsZXQgdGV4dHVyZTtcbiAgICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKTtcbiAgICBjcmVhdGVfdGV4dHVyZSgpO1xuXG4gICAgZ2wuZW5hYmxlKGdsLkJMRU5EKTtcbiAgICBnbC5ibGVuZEZ1bmNTZXBhcmF0ZShnbC5TUkNfQUxQSEEsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEsIGdsLk9ORSwgZ2wuT05FKTtcblxuICAgIGdsLmNsZWFyQ29sb3IoMjQyIC8gMjU1LCAyNDIgLyAyNTUsIDIzMiAvIDI1NSwgMS4wKTtcblxuICAgIGxldCBmcmFtZSA9IDA7XG4gICAgY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICAgICAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcbiAgICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSk7XG4gICAgICAgIGdsLnVuaWZvcm0xZih1bmlMb2NhdGlvblswXSwgMTAgKyAoY2FudmFzLndpZHRoIC0gMTUwKSAvIDUwKTtcbiAgICAgICAgZ2wudW5pZm9ybTFmKHVuaUxvY2F0aW9uWzFdLCBmcmFtZSk7XG4gICAgICAgIGdsLnVuaWZvcm0yZnYodW5pTG9jYXRpb25bMl0sIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdKTtcbiAgICAgICAgc2V0X2F0dHJpYnV0ZShbdlBvc2l0aW9uLCB2RG91YmxlQWNjZWwsIHZOdW1iZXIsIHZWZWxvY2l0eSwgdkV4aXN0ZW5jZUZyYW1lLCB2QWNjZWxdLCBhdHRMb2NhdGlvbiwgYXR0U3RyaWRlKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMCwgdlRyYW5zZm9ybUZlZWRiYWNrWzBdKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMSwgdlRyYW5zZm9ybUZlZWRiYWNrWzFdKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMiwgdlRyYW5zZm9ybUZlZWRiYWNrWzJdKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMywgdlRyYW5zZm9ybUZlZWRiYWNrWzNdKTtcbiAgICAgICAgZ2wuYmVnaW5UcmFuc2Zvcm1GZWVkYmFjayhnbC5QT0lOVFMpO1xuICAgICAgICBnbC5kcmF3QXJyYXlzKGdsLlBPSU5UUywgMCwgcGFydGljbGVOdW0pO1xuICAgICAgICBnbC5lbmRUcmFuc2Zvcm1GZWVkYmFjaygpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyQmFzZShnbC5UUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSLCAwLCBudWxsKTtcbiAgICAgICAgZ2wuYmluZEJ1ZmZlckJhc2UoZ2wuVFJBTlNGT1JNX0ZFRURCQUNLX0JVRkZFUiwgMSwgbnVsbCk7XG4gICAgICAgIGdsLmJpbmRCdWZmZXJCYXNlKGdsLlRSQU5TRk9STV9GRUVEQkFDS19CVUZGRVIsIDIsIG51bGwpO1xuICAgICAgICBnbC5iaW5kQnVmZmVyQmFzZShnbC5UUkFOU0ZPUk1fRkVFREJBQ0tfQlVGRkVSLCAzLCBudWxsKTtcbiAgICAgICAgbGV0IHRlbXAgPSB2UG9zaXRpb247XG4gICAgICAgIHZQb3NpdGlvbiA9IHZUcmFuc2Zvcm1GZWVkYmFja1swXTtcbiAgICAgICAgdlRyYW5zZm9ybUZlZWRiYWNrWzBdID0gdGVtcDtcbiAgICAgICAgbGV0IHRlbXAyID0gdlZlbG9jaXR5O1xuICAgICAgICB2VmVsb2NpdHkgPSB2VHJhbnNmb3JtRmVlZGJhY2tbMV07XG4gICAgICAgIHZUcmFuc2Zvcm1GZWVkYmFja1sxXSA9IHRlbXAyO1xuICAgICAgICBsZXQgdGVtcDMgPSB2RXhpc3RlbmNlRnJhbWU7XG4gICAgICAgIHZFeGlzdGVuY2VGcmFtZSA9IHZUcmFuc2Zvcm1GZWVkYmFja1syXTtcbiAgICAgICAgdlRyYW5zZm9ybUZlZWRiYWNrWzJdID0gdGVtcDM7XG4gICAgICAgIGxldCB0ZW1wNCA9IHZBY2NlbDtcbiAgICAgICAgdkFjY2VsID0gdlRyYW5zZm9ybUZlZWRiYWNrWzNdO1xuICAgICAgICB2VHJhbnNmb3JtRmVlZGJhY2tbM10gPSB0ZW1wNDtcbiAgICAgICAgZ2wuZmx1c2goKTtcbiAgICAgICAgZnJhbWUrKzsgICAgICAgIFxuICAgIH07XG4gICAgcmV0dXJuIHJlbmRlcjtcbn07XG5cbmNsYXNzIENyZWF0ZUNhbnZhcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnJlcXVlc3RJZD0wO1xuICAgIH1cbiAgICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVDYW52YXMoKTtcbiAgICB9XG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKXtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5yZXF1ZXN0SWQpO1xuICAgIH1cbiAgICB1cGRhdGVDYW52YXMoKSB7ICAgICAgICBcbiAgICAgICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLnByb3BzLnN0eWxlLndpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnByb3BzLnN0eWxlLmhlaWdodDtcbiAgICAgICAgdGhpcy5nbCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoXCJ3ZWJnbDJcIik7XG4gICAgICAgIGNvbnN0IHJlbmRlcj13ZWJHTFN0YXJ0KHRoaXMuY2FudmFzLHRoaXMuZ2wsdmVydCgpLGZyYWcoKSk7XG4gICAgICAgIGNvbnN0IGxvb3A9KCk9PnsgICAgICAgICAgICBcbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0SWQ9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApO1xuICAgICAgICB9XG4gICAgICAgIGxvb3AoKTtcbiAgICB9XG4gICAgaGFuZGxlUmVzaXplKHcsaCl7XG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gdztcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICAgICAgdGhpcy5nbC52aWV3cG9ydCgwLDAsdyxoKTsgICAgICAgIFxuICAgICAgfSBcbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Y2FudmFzXG4gICAgICAgICAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgICAgICAgICAgcmVmPXtlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBlO1xuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IENyZWF0ZUNhbnZhcztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ3JlYXRlQ2FudmFzIGZyb20gJy4vY3JlYXRlQ2FudmFzLmpzeCc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZS5zY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFydGljbGVGbGFtZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodFxuICAgIH07XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgc3R5bGUudXNlKCk7XG4gICAgdGhpcy50ZW1wSGFuZGxlUmVzaXplID0gdGhpcy5oYW5kbGVSZXNpemUuYmluZCh0aGlzKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy50ZW1wSGFuZGxlUmVzaXplKTtcbiAgfVxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBzdHlsZS51bnVzZSgpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnRlbXBIYW5kbGVSZXNpemUpO1xuICB9XG4gIGhhbmRsZVJlc2l6ZShlKSB7XG4gICAgY29uc3Qgd2lkdGggPSBlLnRhcmdldC5pbm5lcldpZHRoO1xuICAgIGNvbnN0IGhlaWdodCA9IGUudGFyZ2V0LmlubmVySGVpZ2h0O1xuICAgIHRoaXMucmVmcy5jcmVhdGVDYW52YXMuaGFuZGxlUmVzaXplKHdpZHRoLCBoZWlnaHQpO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICB9KTtcbiAgfVxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxDcmVhdGVDYW52YXNcbiAgICAgICAgcmVmPSdjcmVhdGVDYW52YXMnXG4gICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgd2lkdGg6IHRoaXMuc3RhdGUud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmhlaWdodFxuICAgICAgICB9fVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCl7cmV0dXJuKFsnI3ZlcnNpb24gMzAwIGVzJywnbGF5b3V0IChsb2NhdGlvbj0wKWluIHZlYzMgcG9zaXRpb247JywnbGF5b3V0IChsb2NhdGlvbj0xKWluIHZlYzMgZG91YmxlQWNjZWw7JywnbGF5b3V0IChsb2NhdGlvbj0yKWluIGZsb2F0IG51bWJlcjsnLCdsYXlvdXQgKGxvY2F0aW9uPTMpaW4gdmVjMyB2ZWxvY2l0eTsgJywnbGF5b3V0IChsb2NhdGlvbj00KWluIGZsb2F0IGV4aXN0ZW5jZUZyYW1lOycsJ2xheW91dCAobG9jYXRpb249NSlpbiB2ZWMzIGFjY2VsOycsJ3VuaWZvcm0gZmxvYXQgcG9pbnRTaXplOycsJ3VuaWZvcm0gZmxvYXQgZnJhbWU7JywndW5pZm9ybSB2ZWMyIHJlc29sdXRpb247Jywnb3V0IHZlYzMgb3V0UG9zaXRpb247Jywnb3V0IHZlYzMgb3V0VmVsb2NpdHk7Jywnb3V0IGZsb2F0IG91dEV4aXN0ZW5jZUZyYW1lOycsJ291dCB2ZWMzIG91dEFjY2VsOycsJyBmbG9hdCByYW5kKGZsb2F0IGNvKXsnLCcgICAgcmV0dXJuIGZyYWN0KHNpbihjbyozMi4yMzMpICogNzUuNTQ1KTsnLCd9Jywndm9pZCBtYWluKHZvaWQpeycsJyAgICB2ZWMzIHA9cG9zaXRpb24ueHl6OycsJyAgIGlmKHAueD4xLjB8fHAueDwtMS4wfHxwLnk+MS4wKXsnLCcgICAgICAgIHZlYzMgYT12ZWMzKDAuMCk7JywnICAgICAgICBhLng9ZG91YmxlQWNjZWwueD4wLjA/KC0wLjAwMTgtKHJhbmQobnVtYmVyKjAuMDEpKjAuMDAwMSkpOigwLjAwMTgrKHJhbmQobnVtYmVyKjAuMDEpKjAuMDAwMSkpOycsJyAgICAgICAgYS56PWRvdWJsZUFjY2VsLno+MC4wPygtMC4wMDE4LShyYW5kKG51bWJlciowLjAzKSowLjAwMDEpKTooMC4wMDE4KyhyYW5kKG51bWJlciowLjAzKSowLjAwMDEpKTsnLCcgICAgICAgIG91dEFjY2VsPWE7JywnICAgICAgICBvdXRFeGlzdGVuY2VGcmFtZT0wLjA7JywnICAgICAgICB2ZWMzIHY9dmVjMygwLjApOycsJyAgICAgICAgdi54PWEueDwwLjA/MC4wNDgtKHJhbmQobnVtYmVyKjAuMDIpKjAuMDQpOi0wLjA0OCsocmFuZChudW1iZXIqMC4wMikqMC4wNCk7JywnICAgICAgICB2Lnk9MC4wMy1yYW5kKG51bWJlciowLjAxKSowLjAyOycsJyAgICAgICAgdi56PWEuejwwLjA/MC4wNDgtKHJhbmQobnVtYmVyKjAuMDQpKjAuMDQpOi0wLjA0OCsocmFuZChudW1iZXIqMC4wNCkqMC4wNCk7JywnICAgICAgICBvdXRWZWxvY2l0eT12OycsJyAgICAgICAgb3V0UG9zaXRpb249dmVjMygocmFuZChudW1iZXIqMC4wNikqMi4wLTEuMCkqMC4xLC0wLjgrKHJhbmQobnVtYmVyKjAuMDUpKjIuMC0xLjApKjAuMSwocmFuZChudW1iZXIqMC4wNikqMi4wLTEuMCkqMC4xKTsnLCcgICAgfWVsc2V7JywnICAgICAgICBvdXRFeGlzdGVuY2VGcmFtZT1leGlzdGVuY2VGcmFtZSsxLjA7JywnICAgICAgICBvdXRBY2NlbD1hY2NlbCtkb3VibGVBY2NlbDsnLCcgICAgICAgIG91dFZlbG9jaXR5PXZlbG9jaXR5K291dEFjY2VsOycsJyAgICAgICAgb3V0UG9zaXRpb249cG9zaXRpb24rb3V0VmVsb2NpdHk7JywnICAgIH0nLCcgICAgZ2xfUG9zaXRpb249dmVjNChvdXRQb3NpdGlvbiwxLjApOycsJyAgICBnbF9Qb2ludFNpemU9cG9pbnRTaXplKnJhbmQobnVtYmVyKjAuMSkrZXhpc3RlbmNlRnJhbWUvMy4wOycsJ30nXS5qb2luKCdcXG4nKSl9IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpe3JldHVybihbJyN2ZXJzaW9uIDMwMCBlcycsJyAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JywnICAgIHVuaWZvcm0gdmVjMiByZXNvbHV0aW9uOycsJyAgICB1bmlmb3JtIGZsb2F0IGZyYW1lOycsJyAgICB1bmlmb3JtIHNhbXBsZXIyRCB0ZXg7JywnICAgIG91dCB2ZWM0IG91dENvbG9yOycsJyAgICBpbiBmbG9hdCBvdXRFeGlzdGVuY2VGcmFtZTsnLCcgICAgaW4gdmVjMyBvdXRQb3NpdGlvbjsnLCdmbG9hdCByYW5kKGZsb2F0IGNvKXsnLCcgICAgcmV0dXJuIGZyYWN0KHNpbihjbyo3OC4yMzMpICogNDM1LjU0NTMpOycsJ30nLCd2b2lkIG1haW4odm9pZCl7JywnICAgIHZlYzIgcD0oZ2xfRnJhZ0Nvb3JkLnh5KjIuMC1yZXNvbHV0aW9uKS9taW4ocmVzb2x1dGlvbi54LHJlc29sdXRpb24ueSk7JywnICAgIHZlYzQgc21wQ29sb3I9dGV4dHVyZSh0ZXgsIGdsX1BvaW50Q29vcmQpOycsJyAgICBzbXBDb2xvci5nPTQuMCpzcXJ0KDAuMDAxLXBvdyhvdXRQb3NpdGlvbi54LDIuMCkqcG93KG91dFBvc2l0aW9uLnkrMC45LDIuMCkpOycsJyAgICBzbXBDb2xvcio9b3V0RXhpc3RlbmNlRnJhbWUvMjAuMDsnLCcgICAgc21wQ29sb3IuYSo9MS4wLW91dEV4aXN0ZW5jZUZyYW1lLzUwLjA7JywnICAgIHNtcENvbG9yLmEqPTQuMCpzcXJ0KDAuNS1wb3cob3V0UG9zaXRpb24ueCwyLjApKTsnLCcgICAgaWYoc21wQ29sb3IuYT09MC4wKWRpc2NhcmQ7JywnICAgIGVsc2Ugb3V0Q29sb3I9c21wQ29sb3IrcmFuZChwLnkqZnJhbWUpKjAuMjsnLCd9J10uam9pbignXFxuJykpfSIsInZhciByZWZzID0gMDtcbnZhciBkaXNwb3NlO1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL3N0eWxlLnNjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuaWYoY29udGVudC5sb2NhbHMpIGV4cG9ydHMubG9jYWxzID0gY29udGVudC5sb2NhbHM7XG5cbmV4cG9ydHMudXNlID0gZXhwb3J0cy5yZWYgPSBmdW5jdGlvbigpIHtcblx0aWYoIShyZWZzKyspKSB7XG5cdFx0ZGlzcG9zZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHtcImhtclwiOnRydWV9KTtcblx0fVxuXG5cdHJldHVybiBleHBvcnRzO1xufTtcblxuZXhwb3J0cy51bnVzZSA9IGV4cG9ydHMudW5yZWYgPSBmdW5jdGlvbigpIHtcbiAgaWYocmVmcyA+IDAgJiYgISgtLXJlZnMpKSB7XG5cdCAgIGRpc3Bvc2UoKTtcblx0XHQgZGlzcG9zZSA9IG51bGw7XG4gIH1cbn07XG5pZihtb2R1bGUuaG90KSB7XG5cdHZhciBsYXN0UmVmcyA9IG1vZHVsZS5ob3QuZGF0YSAmJiBtb2R1bGUuaG90LmRhdGEucmVmcyB8fCAwO1xuXG5cdGlmKGxhc3RSZWZzKSB7XG5cdFx0ZXhwb3J0cy5yZWYoKTtcblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdHJlZnMgPSBsYXN0UmVmcztcblx0XHR9XG5cdH1cblxuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdCgpO1xuXHR9XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRkYXRhLnJlZnMgPSBjb250ZW50LmxvY2FscyA/IDAgOiByZWZzO1xuXG5cdFx0aWYoZGlzcG9zZSkge1xuXHRcdFx0ZGlzcG9zZSgpO1xuXHRcdH1cblx0fSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5IHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxuICBvdmVyZmxvdzogaGlkZGVuOyB9XFxuXFxuI3Jvb3Qge1xcbiAgZm9udC1zaXplOiAwOyB9XFxuXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIl0sInNvdXJjZVJvb3QiOiIifQ==