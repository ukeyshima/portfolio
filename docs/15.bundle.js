(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{76:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),o=n(3),a=n.n(o),c=n(4),s=n.n(c),u=n(5),l=n.n(u),f=n(6),v=n.n(f),h=n(0),d=n.n(h),p=n(24),m=n.n(p),g=n(942),R=n.n(g),F=n(943),A=n.n(F),E=function(e,t,n,r){var i=function(e,n){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))return r;alert(t.getShaderInfoLog(r)),console.log(t.getShaderInfoLog(r))},o=function(e,n){var r=t.createProgram();return t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?(t.useProgram(r),r):null}(i(n,t.VERTEX_SHADER),i(r,t.FRAGMENT_SHADER)),a=[];a[0]=t.getUniformLocation(o,"time"),a[1]=t.getUniformLocation(o,"resolution");var c,s,u=[0,2,1,1,2,3],l=[],f=[],v=(c=[-1,1,0,1,1,0,-1,-1,0,1,-1,0],s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),s);l[0]=t.getAttribLocation(o,"position"),f[0]=3;var h=function(e){var n=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),n}(u);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.clearColor(1,0,0,1);var d=(new Date).getTime();return function(){var n,r;t.clear(t.COLOR_BUFFER_BIT),t.uniform1f(a[0],.001*((new Date).getTime()-d)),t.uniform2fv(a[1],[e.width,e.height]),n=l,r=f,[v].forEach(function(e,i,o){t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n[i]),t.vertexAttribPointer(n[i],r[i],t.FLOAT,!1,0,0)}),t.drawElements(t.TRIANGLES,u.length,t.UNSIGNED_SHORT,0),t.flush()}},y=function(e){function t(e){var n;return i()(this,t),(n=s()(this,l()(t).call(this,e))).requestId=0,n}return v()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.updateCanvas()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.requestId)}},{key:"updateCanvas",value:function(){var e=this;this.canvas.width=this.props.style.width,this.canvas.height=this.props.style.height,this.gl=this.canvas.getContext("webgl");var t=E(this.canvas,this.gl,R()(),A()());!function n(){t(),e.requestId=requestAnimationFrame(n)}()}},{key:"handleResize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.gl.viewport(0,0,e,t)}},{key:"render",value:function(){var e=this;return d.a.createElement("canvas",m()({},this.props,{ref:function(t){e.canvas=t}}))}}]),t}(d.a.Component),b=n(944),w=n.n(b);n.d(t,"default",function(){return x});var x=function(e){function t(e){var n;return i()(this,t),(n=s()(this,l()(t).call(this,e))).state={width:window.innerWidth,height:window.innerHeight},n}return v()(t,e),a()(t,[{key:"componentDidMount",value:function(){w.a.use(),this.tempHandleResize=this.handleResize.bind(this),window.addEventListener("resize",this.tempHandleResize)}},{key:"componentWillUnmount",value:function(){w.a.unuse(),window.removeEventListener("resize",this.tempHandleResize)}},{key:"handleResize",value:function(e){var t=e.target.innerWidth,n=e.target.innerHeight;this.refs.createCanvas.handleResize(t,n),this.setState({width:t,height:n})}},{key:"render",value:function(){return d.a.createElement(y,{ref:"createCanvas",style:{width:this.state.width,height:this.state.height}})}}]),t}(d.a.Component)},942:function(e,t){e.exports=function(){return["attribute vec3 position;","void main(void){","    gl_Position = vec4(position, 1.0);","}"].join("\n")}},943:function(e,t){e.exports=function(){return["    precision mediump float;","    uniform float time;","    uniform vec2  resolution;    ","    float random(vec2 p){","        return fract(sin(dot(p.xy,vec2(12.9898,78.233)))*43758.5453123)*2.0-1.0;","    }","    float boxDistFunc(vec3 p,vec3 b,vec3 c){","        return length(max(abs(p-c)-b,0.0));","    }","    float floorDistFunc(vec3 p){","        vec3 q=p;","        q.xz=mod(p.xz,1.0)-0.5;","        return boxDistFunc(q,vec3(0.4,abs(random(floor(p.xz)))+abs(2.0*floor(p.z/2.0)*sin(time*1.3*random(floor(p.xz)))),0.4),vec3(0.0,0.0,0.0));","    }","    float distFunc(vec3 p){","        return floorDistFunc(p);","    }","    vec3 genNormal(vec3 p){","        float d=0.001;","        return normalize(vec3(","            distFunc(p+vec3(d,0.0,0.0))-distFunc(p+vec3(-d,0.0,0.0)),","            distFunc(p+vec3(0.0,d,0.0))-distFunc(p+vec3(0.0,-d,0.0)),","            distFunc(p+vec3(0.0,0.0,d))-distFunc(p+vec3(0.0,0.0,-d))","            ));","    }","    vec3 getRayColor(inout vec3 ray,inout vec3 origin,out bool hit){","        float distance=0.0;","        float rLen=0.0;","        vec3 rPos=origin;","        vec3 color=vec3(1.0);","        float maxDist=30.0;","        float marchCount=0.0;","        for(int i=0;i<100;i++){","            distance=distFunc(rPos);","            if(abs(distance)<0.01){","                if(distance==floorDistFunc(rPos)){","                    color=vec3(0.7,0.3,0.7);","                }","                break;","            }","            rLen += min(min((step(0.0,ray.x)-fract(rPos.x))/ray.x, (step(0.0,ray.z)-fract(rPos.z))/ray.z)+0.01,distance);","            rPos=origin+rLen*ray;","            if(rLen>maxDist){","                break;","            }","            marchCount++;","        }","        hit=false;","    if(abs(distance)<0.01){","        color+=marchCount/100.0/pow(rLen,2.0);","        vec3 normal=genNormal(rPos);","        origin=rPos+normal*0.02;","        ray=normalize(reflect(ray,normal));","        hit=true;","    }","        return color;","    }","    vec3 pixelColor(vec2 p){","        vec3 cPos=vec3(0.0,1.5+time,time);","        vec3 cDir=vec3(0.0,0.0,1.0);","        vec3 cUp=vec3(0.0,1.0,0.0);","        vec3 cSide=cross(cDir,cUp);","        float depth=1.0;","        vec3 ray=normalize(cSide*p.x+cUp*p.y+cDir*depth);","        vec3 origin=cPos;","        vec3 color=vec3(0.0);","        vec3 alpha=vec3(242.0/255.0,242.0/255.0,232.0/255.0);","        bool hit;","        for(int i=0;i<3;i++){","            color+=alpha*getRayColor(ray,origin,hit);","            alpha*=0.3;","            if(!hit)break;","        }","       return color;","    }","    ","    void main(void){","        vec2 p = (gl_FragCoord.xy * 2.0 - resolution) / min(resolution.x, resolution.y);","        vec3 color=pixelColor(p);","        gl_FragColor=vec4(color,1.0);","    }"].join("\n")}},944:function(e,t,n){var r,i=0,o=n(945);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(t.locals=o.locals),t.use=t.ref=function(){return i++||(r=n(23)(o,{hmr:!0})),t},t.unuse=t.unref=function(){i>0&&!--i&&(r(),r=null)}},945:function(e,t,n){(e.exports=n(22)(!1)).push([e.i,"body {\n  margin: 0;\n  padding: 0;\n  overflow: hidden; }\n\n#root {\n  font-size: 0; }\n",""])}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmFuZG9taXplL2NyZWF0ZUNhbnZhcy5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3JhbmRvbWl6ZS9tYWluLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvcmFuZG9taXplL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovLy8uL3NyYy9yYW5kb21pemUvZnJhZ21lbnRTaGFkZXIuZ2xzbCIsIndlYnBhY2s6Ly8vLi9zcmMvcmFuZG9taXplL3N0eWxlLnNjc3M/MTUzNyIsIndlYnBhY2s6Ly8vLi9zcmMvcmFuZG9taXplL3N0eWxlLnNjc3MiXSwibmFtZXMiOlsid2ViR0xTdGFydCIsImNhbnZhcyIsImdsIiwidnMiLCJmcyIsImNyZWF0ZV9zaGFkZXIiLCJ0ZXh0IiwidHlwZSIsInNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImFsZXJ0IiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvbnNvbGUiLCJsb2ciLCJwcmciLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwidXNlUHJvZ3JhbSIsImNyZWF0ZV9wcm9ncmFtIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInVuaUxvY2F0aW9uIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiZGF0YSIsInZibyIsImluZGV4IiwiYXR0TG9jYXRpb24iLCJhdHRTdHJpZGUiLCJ2UG9zaXRpb24iLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2SW5kZXgiLCJpYm8iLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsIkludDE2QXJyYXkiLCJjcmVhdGVfaWJvIiwiY2xlYXJDb2xvciIsInN0YXJ0VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiYXR0TCIsImF0dFMiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJ1bmlmb3JtMWYiLCJ1bmlmb3JtMmZ2Iiwid2lkdGgiLCJoZWlnaHQiLCJmb3JFYWNoIiwiZSIsImkiLCJhIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRVMiLCJsZW5ndGgiLCJVTlNJR05FRF9TSE9SVCIsImZsdXNoIiwiQ3JlYXRlQ2FudmFzIiwicHJvcHMiLCJfdGhpcyIsImNsYXNzQ2FsbENoZWNrX2RlZmF1bHQiLCJ0aGlzIiwicG9zc2libGVDb25zdHJ1Y3RvclJldHVybl9kZWZhdWx0IiwiZ2V0UHJvdG90eXBlT2ZfZGVmYXVsdCIsImNhbGwiLCJyZXF1ZXN0SWQiLCJ1cGRhdGVDYW52YXMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIl90aGlzMiIsInN0eWxlIiwiZ2V0Q29udGV4dCIsInJlbmRlciIsInZlcnQiLCJmcmFnIiwibG9vcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInciLCJoIiwidmlld3BvcnQiLCJfdGhpczMiLCJyZWFjdF9kZWZhdWx0IiwiY3JlYXRlRWxlbWVudCIsImV4dGVuZHNfZGVmYXVsdCIsInJlZiIsIlJlYWN0IiwiQ29tcG9uZW50IiwiUmFuZG9taXplSGVpZ2h0Iiwic3RhdGUiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJ1c2UiLCJ0ZW1wSGFuZGxlUmVzaXplIiwiaGFuZGxlUmVzaXplIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1bnVzZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJyZWZzIiwiY3JlYXRlQ2FudmFzIiwic2V0U3RhdGUiLCJtb2R1bGUiLCJleHBvcnRzIiwiam9pbiIsImRpc3Bvc2UiLCJjb250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RSxvQkFBb0IsZ0NBQWdDLHdEQUF3RCwwQkFBMEIsNkJBQTZCLFlBQVksdUJBQXVCLFFBQVEsOEJBQThCLDJGQUEyRixvQ0FBb0Msd0NBQXdDLFNBQVFDLEtBQUEsNEJDQWowRixJQUNBQyxFQURBTixFQUFBLEVBRUFPLEVBQWNDLEVBQVEsS0FFdEIsaUJBQUFELE1BQUEsRUFBNENKLEVBQUF2RCxFQUFTMkQsRUFBQSxNQUNyREEsRUFBQUUsU0FBQUwsRUFBQUssT0FBQUYsRUFBQUUsUUFFQUwsRUFBQVosSUFBQVksRUFBQXBCLElBQUEsV0FLQSxPQUpBZ0IsTUFDQU0sRUFBWUUsRUFBUSxHQUFSQSxDQUEyREQsRUFBQSxDQUFZRyxLQUFBLEtBR25GTixHQUdBQSxFQUFBUCxNQUFBTyxFQUFBTyxNQUFBLFdBQ0FYLEVBQUEsTUFBQUEsSUFDQU0sSUFDQUEsRUFBQSw2QkNsQkFILEVBQUFDLFFBQTJCSSxFQUFRLEdBQVJBLEVBQXVELElBS2xGSSxLQUFBLENBQWNULEVBQUF2RCxFQUFTLDZGQUEyRiIsImZpbGUiOiIxNS5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgdmVydCBmcm9tIFwiLi92ZXJ0ZXhTaGFkZXIuZ2xzbFwiO1xuaW1wb3J0IGZyYWcgZnJvbSBcIi4vZnJhZ21lbnRTaGFkZXIuZ2xzbFwiO1xuY29uc3Qgd2ViR0xTdGFydCA9IChjYW52YXMsIGdsLCB2cywgZnMpID0+IHtcbiAgY29uc3QgY3JlYXRlX3Byb2dyYW0gPSAodnMsIGZzKSA9PiB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTtcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdnMpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcyk7XG4gICAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7XG4gICAgaWYgKGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB7XG4gICAgICBnbC51c2VQcm9ncmFtKHByb2dyYW0pO1xuICAgICAgcmV0dXJuIHByb2dyYW07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY3JlYXRlX3NoYWRlciA9ICh0ZXh0LCB0eXBlKSA9PiB7XG4gICAgY29uc3Qgc2hhZGVyID0gZ2wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgIGdsLnNoYWRlclNvdXJjZShzaGFkZXIsIHRleHQpO1xuICAgIGdsLmNvbXBpbGVTaGFkZXIoc2hhZGVyKTtcbiAgICBpZiAoZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICByZXR1cm4gc2hhZGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICAgICAgY29uc29sZS5sb2coZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNyZWF0ZV92Ym8gPSBkYXRhID0+IHtcbiAgICBjb25zdCB2Ym8gPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdmJvKTtcbiAgICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShkYXRhKSwgZ2wuU1RBVElDX0RSQVcpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgICByZXR1cm4gdmJvO1xuICB9O1xuICBjb25zdCBjcmVhdGVfaWJvID0gZGF0YSA9PiB7XG4gICAgY29uc3QgaWJvID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgaWJvKTtcbiAgICBnbC5idWZmZXJEYXRhKFxuICAgICAgZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsXG4gICAgICBuZXcgSW50MTZBcnJheShkYXRhKSxcbiAgICAgIGdsLlNUQVRJQ19EUkFXXG4gICAgKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBudWxsKTtcbiAgICByZXR1cm4gaWJvO1xuICB9O1xuICBjb25zdCBzZXRfYXR0cmlidXRlID0gKHZibywgYXR0TCwgYXR0UykgPT4ge1xuICAgIHZiby5mb3JFYWNoKChlLCBpLCBhKSA9PiB7XG4gICAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgZSk7XG4gICAgICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhdHRMW2ldKTtcbiAgICAgIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoYXR0TFtpXSwgYXR0U1tpXSwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKTtcbiAgICB9KTtcbiAgfTtcbiAgY29uc3QgcHJnID0gY3JlYXRlX3Byb2dyYW0oXG4gICAgY3JlYXRlX3NoYWRlcih2cywgZ2wuVkVSVEVYX1NIQURFUiksXG4gICAgY3JlYXRlX3NoYWRlcihmcywgZ2wuRlJBR01FTlRfU0hBREVSKVxuICApO1xuICBjb25zdCB1bmlMb2NhdGlvbiA9IFtdO1xuICB1bmlMb2NhdGlvblswXSA9IGdsLmdldFVuaWZvcm1Mb2NhdGlvbihwcmcsIFwidGltZVwiKTtcbiAgdW5pTG9jYXRpb25bMV0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLCBcInJlc29sdXRpb25cIik7XG5cbiAgY29uc3QgcG9zaXRpb24gPSBbXG4gICAgLTEuMCxcbiAgICAxLjAsXG4gICAgMC4wLFxuICAgIDEuMCxcbiAgICAxLjAsXG4gICAgMC4wLFxuICAgIC0xLjAsXG4gICAgLTEuMCxcbiAgICAwLjAsXG4gICAgMS4wLFxuICAgIC0xLjAsXG4gICAgMC4wXG4gIF07XG4gIGNvbnN0IGluZGV4ID0gWzAsIDIsIDEsIDEsIDIsIDNdO1xuICBjb25zdCBhdHRMb2NhdGlvbiA9IFtdO1xuICBjb25zdCBhdHRTdHJpZGUgPSBbXTtcblxuICBjb25zdCB2UG9zaXRpb24gPSBjcmVhdGVfdmJvKHBvc2l0aW9uKTtcbiAgYXR0TG9jYXRpb25bMF0gPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcmcsIFwicG9zaXRpb25cIik7XG4gIGF0dFN0cmlkZVswXSA9IDM7XG5cbiAgY29uc3QgdkluZGV4ID0gY3JlYXRlX2libyhpbmRleCk7XG4gIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHZJbmRleCk7XG5cbiAgZ2wuY2xlYXJDb2xvcigxLjAsIDAuMCwgMC4wLCAxLjApO1xuXG4gIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICBjb25zdCByZW5kZXIgPSAoKSA9PiB7XG4gICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgZ2wudW5pZm9ybTFmKHVuaUxvY2F0aW9uWzBdLCAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydFRpbWUpICogMC4wMDEpO1xuICAgIGdsLnVuaWZvcm0yZnYodW5pTG9jYXRpb25bMV0sIFtjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHRdKTtcbiAgICBzZXRfYXR0cmlidXRlKFt2UG9zaXRpb25dLCBhdHRMb2NhdGlvbiwgYXR0U3RyaWRlKTtcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCBpbmRleC5sZW5ndGgsIGdsLlVOU0lHTkVEX1NIT1JULCAwKTtcbiAgICBnbC5mbHVzaCgpOyAgICBcbiAgfTtcbiAgcmV0dXJuIHJlbmRlcjtcbn07XG5cbmNsYXNzIENyZWF0ZUNhbnZhcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMucmVxdWVzdElkPTA7XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVDYW52YXMoKTtcbiAgfVxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElkKTtcbiAgfVxuICB1cGRhdGVDYW52YXMoKSB7ICAgIFxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5wcm9wcy5zdHlsZS53aWR0aDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnByb3BzLnN0eWxlLmhlaWdodDtcbiAgICB0aGlzLmdsID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xuICAgIGNvbnN0IHJlbmRlcj13ZWJHTFN0YXJ0KHRoaXMuY2FudmFzLHRoaXMuZ2wsdmVydCgpLGZyYWcoKSk7XG4gICAgY29uc3QgbG9vcD0oKT0+e1xuICAgICAgcmVuZGVyKCk7XG4gICAgICB0aGlzLnJlcXVlc3RJZD1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgfVxuICAgIGxvb3AoKTtcbiAgfVxuICBoYW5kbGVSZXNpemUodyxoKXtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHc7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICB0aGlzLmdsLnZpZXdwb3J0KDAsMCx3LGgpOyAgICAgICAgXG4gIH0gXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGNhbnZhc1xuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgcmVmPXtlID0+IHtcbiAgICAgICAgICB0aGlzLmNhbnZhcyA9IGU7XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IENyZWF0ZUNhbnZhcztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ3JlYXRlQ2FudmFzIGZyb20gJy4vY3JlYXRlQ2FudmFzLmpzeCc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZS5zY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmFuZG9taXplSGVpZ2h0IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0XG4gICAgfTtcbiAgfVxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBzdHlsZS51c2UoKTtcbiAgICB0aGlzLnRlbXBIYW5kbGVSZXNpemUgPSB0aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnRlbXBIYW5kbGVSZXNpemUpO1xuICB9XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHN0eWxlLnVudXNlKCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudGVtcEhhbmRsZVJlc2l6ZSk7XG4gIH1cbiAgaGFuZGxlUmVzaXplKGUpIHtcbiAgICBjb25zdCB3aWR0aCA9IGUudGFyZ2V0LmlubmVyV2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gZS50YXJnZXQuaW5uZXJIZWlnaHQ7XG4gICAgdGhpcy5yZWZzLmNyZWF0ZUNhbnZhcy5oYW5kbGVSZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH0pO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPENyZWF0ZUNhbnZhc1xuICAgICAgICByZWY9J2NyZWF0ZUNhbnZhcydcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS53aWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtyZXR1cm4oWydhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjsnLCd2b2lkIG1haW4odm9pZCl7JywnICAgIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMS4wKTsnLCd9J10uam9pbignXFxuJykpfSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtyZXR1cm4oWycgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JywnICAgIHVuaWZvcm0gZmxvYXQgdGltZTsnLCcgICAgdW5pZm9ybSB2ZWMyICByZXNvbHV0aW9uOyAgICAnLCcgICAgZmxvYXQgcmFuZG9tKHZlYzIgcCl7JywnICAgICAgICByZXR1cm4gZnJhY3Qoc2luKGRvdChwLnh5LHZlYzIoMTIuOTg5OCw3OC4yMzMpKSkqNDM3NTguNTQ1MzEyMykqMi4wLTEuMDsnLCcgICAgfScsJyAgICBmbG9hdCBib3hEaXN0RnVuYyh2ZWMzIHAsdmVjMyBiLHZlYzMgYyl7JywnICAgICAgICByZXR1cm4gbGVuZ3RoKG1heChhYnMocC1jKS1iLDAuMCkpOycsJyAgICB9JywnICAgIGZsb2F0IGZsb29yRGlzdEZ1bmModmVjMyBwKXsnLCcgICAgICAgIHZlYzMgcT1wOycsJyAgICAgICAgcS54ej1tb2QocC54eiwxLjApLTAuNTsnLCcgICAgICAgIHJldHVybiBib3hEaXN0RnVuYyhxLHZlYzMoMC40LGFicyhyYW5kb20oZmxvb3IocC54eikpKSthYnMoMi4wKmZsb29yKHAuei8yLjApKnNpbih0aW1lKjEuMypyYW5kb20oZmxvb3IocC54eikpKSksMC40KSx2ZWMzKDAuMCwwLjAsMC4wKSk7JywnICAgIH0nLCcgICAgZmxvYXQgZGlzdEZ1bmModmVjMyBwKXsnLCcgICAgICAgIHJldHVybiBmbG9vckRpc3RGdW5jKHApOycsJyAgICB9JywnICAgIHZlYzMgZ2VuTm9ybWFsKHZlYzMgcCl7JywnICAgICAgICBmbG9hdCBkPTAuMDAxOycsJyAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZSh2ZWMzKCcsJyAgICAgICAgICAgIGRpc3RGdW5jKHArdmVjMyhkLDAuMCwwLjApKS1kaXN0RnVuYyhwK3ZlYzMoLWQsMC4wLDAuMCkpLCcsJyAgICAgICAgICAgIGRpc3RGdW5jKHArdmVjMygwLjAsZCwwLjApKS1kaXN0RnVuYyhwK3ZlYzMoMC4wLC1kLDAuMCkpLCcsJyAgICAgICAgICAgIGRpc3RGdW5jKHArdmVjMygwLjAsMC4wLGQpKS1kaXN0RnVuYyhwK3ZlYzMoMC4wLDAuMCwtZCkpJywnICAgICAgICAgICAgKSk7JywnICAgIH0nLCcgICAgdmVjMyBnZXRSYXlDb2xvcihpbm91dCB2ZWMzIHJheSxpbm91dCB2ZWMzIG9yaWdpbixvdXQgYm9vbCBoaXQpeycsJyAgICAgICAgZmxvYXQgZGlzdGFuY2U9MC4wOycsJyAgICAgICAgZmxvYXQgckxlbj0wLjA7JywnICAgICAgICB2ZWMzIHJQb3M9b3JpZ2luOycsJyAgICAgICAgdmVjMyBjb2xvcj12ZWMzKDEuMCk7JywnICAgICAgICBmbG9hdCBtYXhEaXN0PTMwLjA7JywnICAgICAgICBmbG9hdCBtYXJjaENvdW50PTAuMDsnLCcgICAgICAgIGZvcihpbnQgaT0wO2k8MTAwO2krKyl7JywnICAgICAgICAgICAgZGlzdGFuY2U9ZGlzdEZ1bmMoclBvcyk7JywnICAgICAgICAgICAgaWYoYWJzKGRpc3RhbmNlKTwwLjAxKXsnLCcgICAgICAgICAgICAgICAgaWYoZGlzdGFuY2U9PWZsb29yRGlzdEZ1bmMoclBvcykpeycsJyAgICAgICAgICAgICAgICAgICAgY29sb3I9dmVjMygwLjcsMC4zLDAuNyk7JywnICAgICAgICAgICAgICAgIH0nLCcgICAgICAgICAgICAgICAgYnJlYWs7JywnICAgICAgICAgICAgfScsJyAgICAgICAgICAgIHJMZW4gKz0gbWluKG1pbigoc3RlcCgwLjAscmF5LngpLWZyYWN0KHJQb3MueCkpL3JheS54LCAoc3RlcCgwLjAscmF5LnopLWZyYWN0KHJQb3MueikpL3JheS56KSswLjAxLGRpc3RhbmNlKTsnLCcgICAgICAgICAgICByUG9zPW9yaWdpbityTGVuKnJheTsnLCcgICAgICAgICAgICBpZihyTGVuPm1heERpc3QpeycsJyAgICAgICAgICAgICAgICBicmVhazsnLCcgICAgICAgICAgICB9JywnICAgICAgICAgICAgbWFyY2hDb3VudCsrOycsJyAgICAgICAgfScsJyAgICAgICAgaGl0PWZhbHNlOycsJyAgICBpZihhYnMoZGlzdGFuY2UpPDAuMDEpeycsJyAgICAgICAgY29sb3IrPW1hcmNoQ291bnQvMTAwLjAvcG93KHJMZW4sMi4wKTsnLCcgICAgICAgIHZlYzMgbm9ybWFsPWdlbk5vcm1hbChyUG9zKTsnLCcgICAgICAgIG9yaWdpbj1yUG9zK25vcm1hbCowLjAyOycsJyAgICAgICAgcmF5PW5vcm1hbGl6ZShyZWZsZWN0KHJheSxub3JtYWwpKTsnLCcgICAgICAgIGhpdD10cnVlOycsJyAgICB9JywnICAgICAgICByZXR1cm4gY29sb3I7JywnICAgIH0nLCcgICAgdmVjMyBwaXhlbENvbG9yKHZlYzIgcCl7JywnICAgICAgICB2ZWMzIGNQb3M9dmVjMygwLjAsMS41K3RpbWUsdGltZSk7JywnICAgICAgICB2ZWMzIGNEaXI9dmVjMygwLjAsMC4wLDEuMCk7JywnICAgICAgICB2ZWMzIGNVcD12ZWMzKDAuMCwxLjAsMC4wKTsnLCcgICAgICAgIHZlYzMgY1NpZGU9Y3Jvc3MoY0RpcixjVXApOycsJyAgICAgICAgZmxvYXQgZGVwdGg9MS4wOycsJyAgICAgICAgdmVjMyByYXk9bm9ybWFsaXplKGNTaWRlKnAueCtjVXAqcC55K2NEaXIqZGVwdGgpOycsJyAgICAgICAgdmVjMyBvcmlnaW49Y1BvczsnLCcgICAgICAgIHZlYzMgY29sb3I9dmVjMygwLjApOycsJyAgICAgICAgdmVjMyBhbHBoYT12ZWMzKDI0Mi4wLzI1NS4wLDI0Mi4wLzI1NS4wLDIzMi4wLzI1NS4wKTsnLCcgICAgICAgIGJvb2wgaGl0OycsJyAgICAgICAgZm9yKGludCBpPTA7aTwzO2krKyl7JywnICAgICAgICAgICAgY29sb3IrPWFscGhhKmdldFJheUNvbG9yKHJheSxvcmlnaW4saGl0KTsnLCcgICAgICAgICAgICBhbHBoYSo9MC4zOycsJyAgICAgICAgICAgIGlmKCFoaXQpYnJlYWs7JywnICAgICAgICB9JywnICAgICAgIHJldHVybiBjb2xvcjsnLCcgICAgfScsJyAgICAnLCcgICAgdm9pZCBtYWluKHZvaWQpeycsJyAgICAgICAgdmVjMiBwID0gKGdsX0ZyYWdDb29yZC54eSAqIDIuMCAtIHJlc29sdXRpb24pIC8gbWluKHJlc29sdXRpb24ueCwgcmVzb2x1dGlvbi55KTsnLCcgICAgICAgIHZlYzMgY29sb3I9cGl4ZWxDb2xvcihwKTsnLCcgICAgICAgIGdsX0ZyYWdDb2xvcj12ZWM0KGNvbG9yLDEuMCk7JywnICAgIH0nXS5qb2luKCdcXG4nKSl9IiwidmFyIHJlZnMgPSAwO1xudmFyIGRpc3Bvc2U7XG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vc3R5bGUuc2Nzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5pZihjb250ZW50LmxvY2FscykgZXhwb3J0cy5sb2NhbHMgPSBjb250ZW50LmxvY2FscztcblxuZXhwb3J0cy51c2UgPSBleHBvcnRzLnJlZiA9IGZ1bmN0aW9uKCkge1xuXHRpZighKHJlZnMrKykpIHtcblx0XHRkaXNwb3NlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwge1wiaG1yXCI6dHJ1ZX0pO1xuXHR9XG5cblx0cmV0dXJuIGV4cG9ydHM7XG59O1xuXG5leHBvcnRzLnVudXNlID0gZXhwb3J0cy51bnJlZiA9IGZ1bmN0aW9uKCkge1xuICBpZihyZWZzID4gMCAmJiAhKC0tcmVmcykpIHtcblx0ICAgZGlzcG9zZSgpO1xuXHRcdCBkaXNwb3NlID0gbnVsbDtcbiAgfVxufTtcbmlmKG1vZHVsZS5ob3QpIHtcblx0dmFyIGxhc3RSZWZzID0gbW9kdWxlLmhvdC5kYXRhICYmIG1vZHVsZS5ob3QuZGF0YS5yZWZzIHx8IDA7XG5cblx0aWYobGFzdFJlZnMpIHtcblx0XHRleHBvcnRzLnJlZigpO1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0cmVmcyA9IGxhc3RSZWZzO1xuXHRcdH1cblx0fVxuXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KCk7XG5cdH1cblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHRcdGRhdGEucmVmcyA9IGNvbnRlbnQubG9jYWxzID8gMCA6IHJlZnM7XG5cblx0XHRpZihkaXNwb3NlKSB7XG5cdFx0XHRkaXNwb3NlKCk7XG5cdFx0fVxuXHR9KTtcbn0iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHkge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIG92ZXJmbG93OiBoaWRkZW47IH1cXG5cXG4jcm9vdCB7XFxuICBmb250LXNpemU6IDA7IH1cXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iXSwic291cmNlUm9vdCI6IiJ9