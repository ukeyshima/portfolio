(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{74:function(e,t,n){"use strict";n.r(t);var i=n(2),o=n.n(i),r=n(3),a=n.n(r),c=n(4),s=n.n(c),l=n(5),u=n.n(l),h=n(6),v=n.n(h),d=n(0),f=n.n(d),m=n(24),p=n.n(m),g=n(950),F=n.n(g),R=n(951),P=n.n(R),w=function(e,t,n,i){var o=function(e,n){var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return i;alert(t.getShaderInfoLog(i)),console.log(t.getShaderInfoLog(i))},r=function(e,n){var i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?(t.useProgram(i),i):null}(o(n,t.VERTEX_SHADER),o(i,t.FRAGMENT_SHADER)),a=[];a[0]=t.getUniformLocation(r,"time"),a[1]=t.getUniformLocation(r,"resolution");var c,s,l=[0,2,1,1,2,3],u=[],h=[],v=(c=[-1,1,0,1,1,0,-1,-1,0,1,-1,0],s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),s);u[0]=t.getAttribLocation(r,"position"),h[0]=3;var d=function(e){var n=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),n}(l);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),t.clearColor(1,0,0,1);var f=(new Date).getTime();return function(){var n,i;t.clear(t.COLOR_BUFFER_BIT),t.uniform1f(a[0],.001*((new Date).getTime()-f)),t.uniform2fv(a[1],[e.width,e.height]),n=u,i=h,[v].forEach(function(e,o,r){t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n[o]),t.vertexAttribPointer(n[o],i[o],t.FLOAT,!1,0,0)}),t.drawElements(t.TRIANGLES,l.length,t.UNSIGNED_SHORT,0),t.flush()}},b=function(e){function t(e){var n;return o()(this,t),(n=s()(this,u()(t).call(this,e))).requestId=0,n}return v()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.updateCanvas()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.requestId)}},{key:"updateCanvas",value:function(){var e=this;this.canvas.width=this.props.style.width,this.canvas.height=this.props.style.height,this.gl=this.canvas.getContext("webgl");var t=w(this.canvas,this.gl,F()(),P()());!function n(){t(),e.requestId=requestAnimationFrame(n)}()}},{key:"handleResize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.gl.viewport(0,0,e,t)}},{key:"render",value:function(){var e=this;return f.a.createElement("canvas",p()({},this.props,{ref:function(t){e.canvas=t}}))}}]),t}(f.a.Component),E=n(952),A=n.n(E);n.d(t,"default",function(){return D});var D=function(e){function t(e){var n;return o()(this,t),(n=s()(this,u()(t).call(this,e))).state={width:window.innerWidth,height:window.innerHeight},n}return v()(t,e),a()(t,[{key:"componentDidMount",value:function(){A.a.use(),this.tempHandleResize=this.handleResize.bind(this),window.addEventListener("resize",this.tempHandleResize)}},{key:"componentWillUnmount",value:function(){A.a.unuse(),window.removeEventListener("resize",this.tempHandleResize)}},{key:"handleResize",value:function(e){var t=e.target.innerWidth,n=e.target.innerHeight;this.refs.createCanvas.handleResize(t,n),this.setState({width:t,height:n})}},{key:"render",value:function(){return f.a.createElement(b,{ref:"createCanvas",style:{width:this.state.width,height:this.state.height}})}}]),t}(f.a.Component)},950:function(e,t){e.exports=function(){return["attribute vec3 position;","void main(void){","    gl_Position = vec4(position, 1.0);","}"].join("\n")}},951:function(e,t){e.exports=function(){return["precision mediump float;","uniform float time;","uniform vec2  resolution;","#define PI 3.141592","const vec3 lightPos=vec3(0.0,5.0,5.0);","const vec3 ambientColor=vec3(0.05);","const vec3 cPos=vec3(0.0,3.0,12.0);","const vec3 cDir=vec3(0.0,-.2,-1.0);","const vec3 cUp=vec3(0.0,1.0,0.0);","float sphereDistFunc(vec3 p,vec3 c,float radius){","    return length(p-c)-radius;","}","float planeDistFunc(vec3 p){","    vec3 pos=vec3(0.0,1.0,0.0);","    vec3 n=normalize(pos);","    return dot(p,n)+2.0;","}","float distFunc(vec3 p){","    float obj1,obj2,obj3,obj4,obj5;","    obj1=sphereDistFunc(p,vec3(0.0,cos(time),0.0),2.0);","    obj2=planeDistFunc(p);","    obj3=sphereDistFunc(p,vec3(5.0*(2.0+cos(1.2*time))*sin(time),-1.0,5.0*cos(time)),1.0);","    obj4=sphereDistFunc(p,vec3(5.0*(3.0+cos(1.5*time))*sin(time+PI*2.0/3.0),-1.0,5.0*cos(time+PI*2.0/3.0)),1.0);","    obj5=sphereDistFunc(p,vec3(5.0*(2.0+sin(1.7*time))*sin(time+PI*4.0/3.0),-1.0,5.0*cos(time+PI*4.0/3.0)),1.0);","    return min(min(min(min(obj1,obj2),obj3),obj4),obj5);","}","vec3 genNormal(vec3 p){","    float d=0.001;","    return normalize(vec3(","        distFunc(p+vec3(d,0.0,0.0))-distFunc(p+vec3(-d,0.0,0.0)),","        distFunc(p+vec3(0.0,d,0.0))-distFunc(p+vec3(0.0,-d,0.0)),","        distFunc(p+vec3(0.0,0.0,d))-distFunc(p+vec3(0.0,0.0,-d))","        ));","}","float genShadow(vec3 o,vec3 lightPos){","    vec3 lightVec=normalize(lightPos);","    float h=0.0;","    float c=0.001;","    float r=1.0;","    float shadowCoef=0.5;","    for(int i=0;i<30;i++){","    h=distFunc(o+lightVec*c);","    if(h<0.02)return shadowCoef;","    r=min(r,h*16.0/c);","    c+=h;","    }","    return 1.0+shadowCoef*(r-1.0);","}","vec3 getRayColor(inout vec3 ray,inout vec3 origin){","    float distance=0.0;","    float rLen=0.0;","    vec3 rPos=origin;","    vec3 color=vec3(0.62);","    vec3 normal,specular,halfLE;","    float shadow;","    float maxDist=70.0;","    for(int i=0;i<120;i++){","        distance=distFunc(rPos);","        if(abs(distance)<0.01){","             if(distance==planeDistFunc(rPos)){","                color=(mod(rPos.x,6.0)<3.0&&mod(rPos.z,6.0)<3.0 ||mod(rPos.x,6.0)>3.0&&mod(rPos.z,6.0)>3.0)?vec3(1.0):vec3(0.0);","             }else if(distance==sphereDistFunc(rPos,vec3(0.0,cos(time),0.0),2.0)){","                color=vec3(0.0,1.0,1.0);","             }else if(distance==sphereDistFunc(rPos,vec3(5.0*(2.0+cos(1.2*time))*sin(time),-1.0,5.0*cos(time)),1.0)){","                color=vec3(1.0,0.0,0.0);","            }else if(distance==sphereDistFunc(rPos,vec3(5.0*(3.0+cos(1.5*time))*sin(time+PI*2.0/3.0),-1.0,5.0*cos(time+PI*2.0/3.0)),1.0)){","                color=vec3(1.0,1.0,0.0);","            }else if(distance==sphereDistFunc(rPos,vec3(5.0*(2.0+sin(1.7*time))*sin(time+PI*4.0/3.0),-1.0,5.0*cos(time+PI*4.0/3.0)),1.0)){","                color=vec3(1.0,0.0,1.0);","            }","            normal=genNormal(rPos);","            origin=rPos+normal*0.02;","            ray=normalize(reflect(ray,normal));","            halfLE=normalize(lightPos-cDir);","            specular=vec3(pow(clamp(dot(normal,halfLE),0.0,1.0),50.0));","            shadow=genShadow(rPos+normal*0.001,lightPos);","            color=(color*vec3(clamp(dot(lightPos,normal),0.0,1.0))+specular+ambientColor)*max(0.5,shadow)+rLen/100.0*0.8;","            break;","        }","        rLen+=distance;","        rPos=origin+rLen*ray;","        if(rLen>maxDist){","            break;","        }","    }","        return color;","    ","}","void main(void){","    vec2 p = (gl_FragCoord.xy * 2.0 - resolution) / min(resolution.x, resolution.y);    ","    const vec3 cSide=cross(cDir,cUp);","    const float targetDepth=1.0;","    vec3 ray=normalize(cSide*p.x+cUp*p.y+cDir*targetDepth);","    vec3 origin=cPos;","    vec3 destColor=vec3(0.0);","    vec3 alpha=vec3(0.7,0.7,0.67);","    for(int i=0;i<3;i++){","        destColor+=alpha*getRayColor(ray,origin);","        alpha*=0.7;","    }","    gl_FragColor=vec4(destColor,1.0);","}"].join("\n")}},952:function(e,t,n){var i,o=0,r=n(953);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(t.locals=r.locals),t.use=t.ref=function(){return o++||(i=n(23)(r,{hmr:!0})),t},t.unuse=t.unref=function(){o>0&&!--o&&(i(),i=null)}},953:function(e,t,n){(e.exports=n(22)(!1)).push([e.i,"body {\n  margin: 0;\n  padding: 0;\n  overflow: hidden; }\n\n#root {\n  font-size: 0; }\n",""])}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcmVmbGVjdGlvbkJhbGwvY3JlYXRlQ2FudmFzLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvcmVmbGVjdGlvbkJhbGwvbWFpbi5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlZmxlY3Rpb25CYWxsL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovLy8uL3NyYy9yZWZsZWN0aW9uQmFsbC9mcmFnbWVudFNoYWRlci5nbHNsIiwid2VicGFjazovLy8uL3NyYy9yZWZsZWN0aW9uQmFsbC9zdHlsZS5zY3NzP2EyNWYiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlZmxlY3Rpb25CYWxsL3N0eWxlLnNjc3MiXSwibmFtZXMiOlsid2ViR0xTdGFydCIsImNhbnZhcyIsImdsIiwidnMiLCJmcyIsImNyZWF0ZV9zaGFkZXIiLCJ0ZXh0IiwidHlwZSIsInNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImFsZXJ0IiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvbnNvbGUiLCJsb2ciLCJwcmciLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwidXNlUHJvZ3JhbSIsImNyZWF0ZV9wcm9ncmFtIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInVuaUxvY2F0aW9uIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiZGF0YSIsInZibyIsImluZGV4IiwiYXR0TG9jYXRpb24iLCJhdHRTdHJpZGUiLCJ2UG9zaXRpb24iLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2SW5kZXgiLCJpYm8iLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsIkludDE2QXJyYXkiLCJjcmVhdGVfaWJvIiwiY2xlYXJDb2xvciIsInN0YXJ0VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiYXR0TCIsImF0dFMiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJ1bmlmb3JtMWYiLCJ1bmlmb3JtMmZ2Iiwid2lkdGgiLCJoZWlnaHQiLCJmb3JFYWNoIiwiZSIsImkiLCJhIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRVMiLCJsZW5ndGgiLCJVTlNJR05FRF9TSE9SVCIsImZsdXNoIiwiQ3JlYXRlQ2FudmFzIiwicHJvcHMiLCJfdGhpcyIsImNsYXNzQ2FsbENoZWNrX2RlZmF1bHQiLCJ0aGlzIiwicG9zc2libGVDb25zdHJ1Y3RvclJldHVybl9kZWZhdWx0IiwiZ2V0UHJvdG90eXBlT2ZfZGVmYXVsdCIsImNhbGwiLCJyZXF1ZXN0SWQiLCJ1cGRhdGVDYW52YXMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIl90aGlzMiIsInN0eWxlIiwiZ2V0Q29udGV4dCIsInJlbmRlciIsInZlcnQiLCJmcmFnIiwibG9vcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInciLCJoIiwidmlld3BvcnQiLCJfdGhpczMiLCJyZWFjdF9kZWZhdWx0IiwiY3JlYXRlRWxlbWVudCIsImV4dGVuZHNfZGVmYXVsdCIsInJlZiIsIlJlYWN0IiwiQ29tcG9uZW50IiwiUmVmbGVjdGlvbkJhbGwiLCJzdGF0ZSIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInVzZSIsInRlbXBIYW5kbGVSZXNpemUiLCJoYW5kbGVSZXNpemUiLCJiaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVudXNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsInJlZnMiLCJjcmVhdGVDYW52YXMiLCJzZXRTdGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJqb2luIiwiZGlzcG9zZSIsImNvbnRlbnQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibG9jYWxzIiwiaG1yIiwidW5yZWYiLCJwdXNoIl0sIm1hcHBpbmdzIjoiMFBBR01BLEVBQWEsU0FBQ0MsRUFBUUMsRUFBSUMsRUFBSUMsR0FDbEMsSUFZTUMsRUFBZ0IsU0FBQ0MsRUFBTUMsR0FDM0IsSUFBTUMsRUFBU04sRUFBR08sYUFBYUYsR0FHL0IsR0FGQUwsRUFBR1EsYUFBYUYsRUFBUUYsR0FDeEJKLEVBQUdTLGNBQWNILEdBQ2JOLEVBQUdVLG1CQUFtQkosRUFBUU4sRUFBR1csZ0JBQ25DLE9BQU9MLEVBRVBNLE1BQU1aLEVBQUdhLGlCQUFpQlAsSUFDMUJRLFFBQVFDLElBQUlmLEVBQUdhLGlCQUFpQlAsS0E0QjlCVSxFQWhEaUIsU0FBQ2YsRUFBSUMsR0FDMUIsSUFBTWUsRUFBVWpCLEVBQUdrQixnQkFJbkIsT0FIQWxCLEVBQUdtQixhQUFhRixFQUFTaEIsR0FDekJELEVBQUdtQixhQUFhRixFQUFTZixHQUN6QkYsRUFBR29CLFlBQVlILEdBQ1hqQixFQUFHcUIsb0JBQW9CSixFQUFTakIsRUFBR3NCLGNBQ3JDdEIsRUFBR3VCLFdBQVdOLEdBQ1BBLEdBRUEsS0F1Q0NPLENBQ1ZyQixFQUFjRixFQUFJRCxFQUFHeUIsZUFDckJ0QixFQUFjRCxFQUFJRixFQUFHMEIsa0JBRWpCQyxFQUFjLEdBQ3BCQSxFQUFZLEdBQUszQixFQUFHNEIsbUJBQW1CWixFQUFLLFFBQzVDVyxFQUFZLEdBQUszQixFQUFHNEIsbUJBQW1CWixFQUFLLGNBRTVDLElBakNtQmEsRUFDWEMsRUE4Q0ZDLEVBQVEsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FDeEJDLEVBQWMsR0FDZEMsRUFBWSxHQUVaQyxHQW5EYUwsRUFpQ0YsRUFDZCxFQUNELEVBQ0EsRUFDQSxFQUNBLEVBQ0EsR0FDQyxHQUNBLEVBQ0QsRUFDQSxHQUNDLEVBQ0QsR0E1Q01DLEVBQU05QixFQUFHbUMsZUFDZm5DLEVBQUdvQyxX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QXdILDJDQUEyQyw2SUFBNkksMkNBQTJDLDZJQUE2SSwyQ0FBMkMsZ0JBQWdCLHNDQUFzQyx1Q0FBdUMsa0RBQWtELCtDQUErQywwRUFBMEUsNERBQTRELDRIQUE0SCxxQkFBcUIsWUFBWSwwQkFBMEIsZ0NBQWdDLDRCQUE0QixxQkFBcUIsWUFBWSxRQUFRLHdCQUF3QixXQUFXLG1CQUFtQiwyRkFBdUYsd0NBQTRDLG1DQUFtQyw4REFBOEQsd0JBQXdCLGdDQUFnQyxxQ0FBcUMsNEJBQTRCLG9EQUFvRCxzQkFBc0IsUUFBUSx3Q0FBd0MsS0FBSUMsS0FBQSw0QkNBbjhILElBQ0FDLEVBREFOLEVBQUEsRUFFQU8sRUFBY0MsRUFBUSxLQUV0QixpQkFBQUQsTUFBQSxFQUE0Q0osRUFBQXZELEVBQVMyRCxFQUFBLE1BQ3JEQSxFQUFBRSxTQUFBTCxFQUFBSyxPQUFBRixFQUFBRSxRQUVBTCxFQUFBWixJQUFBWSxFQUFBcEIsSUFBQSxXQUtBLE9BSkFnQixNQUNBTSxFQUFZRSxFQUFRLEdBQVJBLENBQTJERCxFQUFBLENBQVlHLEtBQUEsS0FHbkZOLEdBR0FBLEVBQUFQLE1BQUFPLEVBQUFPLE1BQUEsV0FDQVgsRUFBQSxNQUFBQSxJQUNBTSxJQUNBQSxFQUFBLDZCQ2xCQUgsRUFBQUMsUUFBMkJJLEVBQVEsR0FBUkEsRUFBdUQsSUFLbEZJLEtBQUEsQ0FBY1QsRUFBQXZELEVBQVMsNkZBQTJGIiwiZmlsZSI6IjE3LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdmVydCBmcm9tICcuL3ZlcnRleFNoYWRlci5nbHNsJztcbmltcG9ydCBmcmFnIGZyb20gJy4vZnJhZ21lbnRTaGFkZXIuZ2xzbCc7XG5jb25zdCB3ZWJHTFN0YXJ0ID0gKGNhbnZhcywgZ2wsIHZzLCBmcykgPT4ge1xuICBjb25zdCBjcmVhdGVfcHJvZ3JhbSA9ICh2cywgZnMpID0+IHtcbiAgICBjb25zdCBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpO1xuICAgIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2cyk7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZzKTtcbiAgICBnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTtcbiAgICBpZiAoZ2wuZ2V0UHJvZ3JhbVBhcmFtZXRlcihwcm9ncmFtLCBnbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgIGdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7XG4gICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVfc2hhZGVyID0gKHRleHQsIHR5cGUpID0+IHtcbiAgICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSk7XG4gICAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgdGV4dCk7XG4gICAgZ2wuY29tcGlsZVNoYWRlcihzaGFkZXIpO1xuICAgIGlmIChnbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBnbC5DT01QSUxFX1NUQVRVUykpIHtcbiAgICAgIHJldHVybiBzaGFkZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICBjb25zb2xlLmxvZyhnbC5nZXRTaGFkZXJJbmZvTG9nKHNoYWRlcikpO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgY3JlYXRlX3ZibyA9IGRhdGEgPT4ge1xuICAgIGNvbnN0IHZibyA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCB2Ym8pO1xuICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBuZXcgRmxvYXQzMkFycmF5KGRhdGEpLCBnbC5TVEFUSUNfRFJBVyk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIG51bGwpO1xuICAgIHJldHVybiB2Ym87XG4gIH07XG4gIGNvbnN0IGNyZWF0ZV9pYm8gPSBkYXRhID0+IHtcbiAgICBjb25zdCBpYm8gPSBnbC5jcmVhdGVCdWZmZXIoKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpYm8pO1xuICAgIGdsLmJ1ZmZlckRhdGEoXG4gICAgICBnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUixcbiAgICAgIG5ldyBJbnQxNkFycmF5KGRhdGEpLFxuICAgICAgZ2wuU1RBVElDX0RSQVdcbiAgICApO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIG51bGwpO1xuICAgIHJldHVybiBpYm87XG4gIH07XG4gIGNvbnN0IHNldF9hdHRyaWJ1dGUgPSAodmJvLCBhdHRMLCBhdHRTKSA9PiB7XG4gICAgdmJvLmZvckVhY2goKGUsIGksIGEpID0+IHtcbiAgICAgIGdsLmJpbmRCdWZmZXIoZ2wuQVJSQVlfQlVGRkVSLCBlKTtcbiAgICAgIGdsLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGF0dExbaV0pO1xuICAgICAgZ2wudmVydGV4QXR0cmliUG9pbnRlcihhdHRMW2ldLCBhdHRTW2ldLCBnbC5GTE9BVCwgZmFsc2UsIDAsIDApO1xuICAgIH0pO1xuICB9O1xuICBjb25zdCBwcmcgPSBjcmVhdGVfcHJvZ3JhbShcbiAgICBjcmVhdGVfc2hhZGVyKHZzLCBnbC5WRVJURVhfU0hBREVSKSxcbiAgICBjcmVhdGVfc2hhZGVyKGZzLCBnbC5GUkFHTUVOVF9TSEFERVIpXG4gICk7XG4gIGNvbnN0IHVuaUxvY2F0aW9uID0gW107XG4gIHVuaUxvY2F0aW9uWzBdID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZywgJ3RpbWUnKTtcbiAgdW5pTG9jYXRpb25bMV0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLCAncmVzb2x1dGlvbicpO1xuXG4gIGNvbnN0IHBvc2l0aW9uID0gW1xuICAgIC0xLjAsXG4gICAgMS4wLFxuICAgIDAuMCxcbiAgICAxLjAsXG4gICAgMS4wLFxuICAgIDAuMCxcbiAgICAtMS4wLFxuICAgIC0xLjAsXG4gICAgMC4wLFxuICAgIDEuMCxcbiAgICAtMS4wLFxuICAgIDAuMFxuICBdO1xuICBjb25zdCBpbmRleCA9IFswLCAyLCAxLCAxLCAyLCAzXTtcbiAgY29uc3QgYXR0TG9jYXRpb24gPSBbXTtcbiAgY29uc3QgYXR0U3RyaWRlID0gW107XG5cbiAgY29uc3QgdlBvc2l0aW9uID0gY3JlYXRlX3Zibyhwb3NpdGlvbik7XG4gIGF0dExvY2F0aW9uWzBdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCAncG9zaXRpb24nKTtcbiAgYXR0U3RyaWRlWzBdID0gMztcblxuICBjb25zdCB2SW5kZXggPSBjcmVhdGVfaWJvKGluZGV4KTtcbiAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdkluZGV4KTtcblxuICBnbC5jbGVhckNvbG9yKDEuMCwgMC4wLCAwLjAsIDEuMCk7XG5cbiAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIGNvbnN0IHJlbmRlciA9ICgpID0+IHtcbiAgICBnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTtcbiAgICBnbC51bmlmb3JtMWYodW5pTG9jYXRpb25bMF0sIChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZSkgKiAwLjAwMSk7XG4gICAgZ2wudW5pZm9ybTJmdih1bmlMb2NhdGlvblsxXSwgW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0pO1xuICAgIHNldF9hdHRyaWJ1dGUoW3ZQb3NpdGlvbl0sIGF0dExvY2F0aW9uLCBhdHRTdHJpZGUpO1xuICAgIGdsLmRyYXdFbGVtZW50cyhnbC5UUklBTkdMRVMsIGluZGV4Lmxlbmd0aCwgZ2wuVU5TSUdORURfU0hPUlQsIDApO1xuICAgIGdsLmZsdXNoKCk7XG4gIH07XG4gIHJldHVybiByZW5kZXI7XG59O1xuXG5jbGFzcyBDcmVhdGVDYW52YXMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnJlcXVlc3RJZCA9IDA7XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVDYW52YXMoKTtcbiAgfVxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnJlcXVlc3RJZCk7XG4gIH1cbiAgdXBkYXRlQ2FudmFzKCkge1xuICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5wcm9wcy5zdHlsZS53aWR0aDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnByb3BzLnN0eWxlLmhlaWdodDtcbiAgICB0aGlzLmdsID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnKTtcbiAgICBjb25zdCByZW5kZXIgPSB3ZWJHTFN0YXJ0KHRoaXMuY2FudmFzLCB0aGlzLmdsLCB2ZXJ0KCksIGZyYWcoKSk7XG4gICAgY29uc3QgbG9vcCA9ICgpID0+IHtcbiAgICAgIHJlbmRlcigpO1xuICAgICAgdGhpcy5yZXF1ZXN0SWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgfTtcbiAgICBsb29wKCk7XG4gIH1cbiAgaGFuZGxlUmVzaXplKHcsIGgpIHtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHc7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICB0aGlzLmdsLnZpZXdwb3J0KDAsIDAsIHcsIGgpO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGNhbnZhc1xuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgcmVmPXtlID0+IHtcbiAgICAgICAgICB0aGlzLmNhbnZhcyA9IGU7XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cbmV4cG9ydCBkZWZhdWx0IENyZWF0ZUNhbnZhcztcbiIsImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgQ3JlYXRlQ2FudmFzIGZyb20gJy4vY3JlYXRlQ2FudmFzLmpzeCc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi9zdHlsZS5zY3NzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVmbGVjdGlvbkJhbGwgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgaGVpZ2h0OiB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICB9O1xuICB9XG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHN0eWxlLnVzZSgpOyAgICBcbiAgICB0aGlzLnRlbXBIYW5kbGVSZXNpemUgPSB0aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnRlbXBIYW5kbGVSZXNpemUpO1xuICB9XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHN0eWxlLnVudXNlKCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudGVtcEhhbmRsZVJlc2l6ZSk7XG4gIH1cbiAgaGFuZGxlUmVzaXplKGUpIHtcbiAgICBjb25zdCB3aWR0aCA9IGUudGFyZ2V0LmlubmVyV2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gZS50YXJnZXQuaW5uZXJIZWlnaHQ7XG4gICAgdGhpcy5yZWZzLmNyZWF0ZUNhbnZhcy5oYW5kbGVSZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH0pO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPENyZWF0ZUNhbnZhc1xuICAgICAgICByZWY9J2NyZWF0ZUNhbnZhcydcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS53aWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtyZXR1cm4oWydhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjsnLCd2b2lkIG1haW4odm9pZCl7JywnICAgIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMS4wKTsnLCd9J10uam9pbignXFxuJykpfSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtyZXR1cm4oWydwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsnLCd1bmlmb3JtIGZsb2F0IHRpbWU7JywndW5pZm9ybSB2ZWMyICByZXNvbHV0aW9uOycsJyNkZWZpbmUgUEkgMy4xNDE1OTInLCdjb25zdCB2ZWMzIGxpZ2h0UG9zPXZlYzMoMC4wLDUuMCw1LjApOycsJ2NvbnN0IHZlYzMgYW1iaWVudENvbG9yPXZlYzMoMC4wNSk7JywnY29uc3QgdmVjMyBjUG9zPXZlYzMoMC4wLDMuMCwxMi4wKTsnLCdjb25zdCB2ZWMzIGNEaXI9dmVjMygwLjAsLS4yLC0xLjApOycsJ2NvbnN0IHZlYzMgY1VwPXZlYzMoMC4wLDEuMCwwLjApOycsJ2Zsb2F0IHNwaGVyZURpc3RGdW5jKHZlYzMgcCx2ZWMzIGMsZmxvYXQgcmFkaXVzKXsnLCcgICAgcmV0dXJuIGxlbmd0aChwLWMpLXJhZGl1czsnLCd9JywnZmxvYXQgcGxhbmVEaXN0RnVuYyh2ZWMzIHApeycsJyAgICB2ZWMzIHBvcz12ZWMzKDAuMCwxLjAsMC4wKTsnLCcgICAgdmVjMyBuPW5vcm1hbGl6ZShwb3MpOycsJyAgICByZXR1cm4gZG90KHAsbikrMi4wOycsJ30nLCdmbG9hdCBkaXN0RnVuYyh2ZWMzIHApeycsJyAgICBmbG9hdCBvYmoxLG9iajIsb2JqMyxvYmo0LG9iajU7JywnICAgIG9iajE9c3BoZXJlRGlzdEZ1bmMocCx2ZWMzKDAuMCxjb3ModGltZSksMC4wKSwyLjApOycsJyAgICBvYmoyPXBsYW5lRGlzdEZ1bmMocCk7JywnICAgIG9iajM9c3BoZXJlRGlzdEZ1bmMocCx2ZWMzKDUuMCooMi4wK2NvcygxLjIqdGltZSkpKnNpbih0aW1lKSwtMS4wLDUuMCpjb3ModGltZSkpLDEuMCk7JywnICAgIG9iajQ9c3BoZXJlRGlzdEZ1bmMocCx2ZWMzKDUuMCooMy4wK2NvcygxLjUqdGltZSkpKnNpbih0aW1lK1BJKjIuMC8zLjApLC0xLjAsNS4wKmNvcyh0aW1lK1BJKjIuMC8zLjApKSwxLjApOycsJyAgICBvYmo1PXNwaGVyZURpc3RGdW5jKHAsdmVjMyg1LjAqKDIuMCtzaW4oMS43KnRpbWUpKSpzaW4odGltZStQSSo0LjAvMy4wKSwtMS4wLDUuMCpjb3ModGltZStQSSo0LjAvMy4wKSksMS4wKTsnLCcgICAgcmV0dXJuIG1pbihtaW4obWluKG1pbihvYmoxLG9iajIpLG9iajMpLG9iajQpLG9iajUpOycsJ30nLCd2ZWMzIGdlbk5vcm1hbCh2ZWMzIHApeycsJyAgICBmbG9hdCBkPTAuMDAxOycsJyAgICByZXR1cm4gbm9ybWFsaXplKHZlYzMoJywnICAgICAgICBkaXN0RnVuYyhwK3ZlYzMoZCwwLjAsMC4wKSktZGlzdEZ1bmMocCt2ZWMzKC1kLDAuMCwwLjApKSwnLCcgICAgICAgIGRpc3RGdW5jKHArdmVjMygwLjAsZCwwLjApKS1kaXN0RnVuYyhwK3ZlYzMoMC4wLC1kLDAuMCkpLCcsJyAgICAgICAgZGlzdEZ1bmMocCt2ZWMzKDAuMCwwLjAsZCkpLWRpc3RGdW5jKHArdmVjMygwLjAsMC4wLC1kKSknLCcgICAgICAgICkpOycsJ30nLCdmbG9hdCBnZW5TaGFkb3codmVjMyBvLHZlYzMgbGlnaHRQb3MpeycsJyAgICB2ZWMzIGxpZ2h0VmVjPW5vcm1hbGl6ZShsaWdodFBvcyk7JywnICAgIGZsb2F0IGg9MC4wOycsJyAgICBmbG9hdCBjPTAuMDAxOycsJyAgICBmbG9hdCByPTEuMDsnLCcgICAgZmxvYXQgc2hhZG93Q29lZj0wLjU7JywnICAgIGZvcihpbnQgaT0wO2k8MzA7aSsrKXsnLCcgICAgaD1kaXN0RnVuYyhvK2xpZ2h0VmVjKmMpOycsJyAgICBpZihoPDAuMDIpcmV0dXJuIHNoYWRvd0NvZWY7JywnICAgIHI9bWluKHIsaCoxNi4wL2MpOycsJyAgICBjKz1oOycsJyAgICB9JywnICAgIHJldHVybiAxLjArc2hhZG93Q29lZiooci0xLjApOycsJ30nLCd2ZWMzIGdldFJheUNvbG9yKGlub3V0IHZlYzMgcmF5LGlub3V0IHZlYzMgb3JpZ2luKXsnLCcgICAgZmxvYXQgZGlzdGFuY2U9MC4wOycsJyAgICBmbG9hdCByTGVuPTAuMDsnLCcgICAgdmVjMyByUG9zPW9yaWdpbjsnLCcgICAgdmVjMyBjb2xvcj12ZWMzKDAuNjIpOycsJyAgICB2ZWMzIG5vcm1hbCxzcGVjdWxhcixoYWxmTEU7JywnICAgIGZsb2F0IHNoYWRvdzsnLCcgICAgZmxvYXQgbWF4RGlzdD03MC4wOycsJyAgICBmb3IoaW50IGk9MDtpPDEyMDtpKyspeycsJyAgICAgICAgZGlzdGFuY2U9ZGlzdEZ1bmMoclBvcyk7JywnICAgICAgICBpZihhYnMoZGlzdGFuY2UpPDAuMDEpeycsJyAgICAgICAgICAgICBpZihkaXN0YW5jZT09cGxhbmVEaXN0RnVuYyhyUG9zKSl7JywnICAgICAgICAgICAgICAgIGNvbG9yPShtb2QoclBvcy54LDYuMCk8My4wJiZtb2QoclBvcy56LDYuMCk8My4wIHx8bW9kKHJQb3MueCw2LjApPjMuMCYmbW9kKHJQb3Mueiw2LjApPjMuMCk/dmVjMygxLjApOnZlYzMoMC4wKTsnLCcgICAgICAgICAgICAgfWVsc2UgaWYoZGlzdGFuY2U9PXNwaGVyZURpc3RGdW5jKHJQb3MsdmVjMygwLjAsY29zKHRpbWUpLDAuMCksMi4wKSl7JywnICAgICAgICAgICAgICAgIGNvbG9yPXZlYzMoMC4wLDEuMCwxLjApOycsJyAgICAgICAgICAgICB9ZWxzZSBpZihkaXN0YW5jZT09c3BoZXJlRGlzdEZ1bmMoclBvcyx2ZWMzKDUuMCooMi4wK2NvcygxLjIqdGltZSkpKnNpbih0aW1lKSwtMS4wLDUuMCpjb3ModGltZSkpLDEuMCkpeycsJyAgICAgICAgICAgICAgICBjb2xvcj12ZWMzKDEuMCwwLjAsMC4wKTsnLCcgICAgICAgICAgICB9ZWxzZSBpZihkaXN0YW5jZT09c3BoZXJlRGlzdEZ1bmMoclBvcyx2ZWMzKDUuMCooMy4wK2NvcygxLjUqdGltZSkpKnNpbih0aW1lK1BJKjIuMC8zLjApLC0xLjAsNS4wKmNvcyh0aW1lK1BJKjIuMC8zLjApKSwxLjApKXsnLCcgICAgICAgICAgICAgICAgY29sb3I9dmVjMygxLjAsMS4wLDAuMCk7JywnICAgICAgICAgICAgfWVsc2UgaWYoZGlzdGFuY2U9PXNwaGVyZURpc3RGdW5jKHJQb3MsdmVjMyg1LjAqKDIuMCtzaW4oMS43KnRpbWUpKSpzaW4odGltZStQSSo0LjAvMy4wKSwtMS4wLDUuMCpjb3ModGltZStQSSo0LjAvMy4wKSksMS4wKSl7JywnICAgICAgICAgICAgICAgIGNvbG9yPXZlYzMoMS4wLDAuMCwxLjApOycsJyAgICAgICAgICAgIH0nLCcgICAgICAgICAgICBub3JtYWw9Z2VuTm9ybWFsKHJQb3MpOycsJyAgICAgICAgICAgIG9yaWdpbj1yUG9zK25vcm1hbCowLjAyOycsJyAgICAgICAgICAgIHJheT1ub3JtYWxpemUocmVmbGVjdChyYXksbm9ybWFsKSk7JywnICAgICAgICAgICAgaGFsZkxFPW5vcm1hbGl6ZShsaWdodFBvcy1jRGlyKTsnLCcgICAgICAgICAgICBzcGVjdWxhcj12ZWMzKHBvdyhjbGFtcChkb3Qobm9ybWFsLGhhbGZMRSksMC4wLDEuMCksNTAuMCkpOycsJyAgICAgICAgICAgIHNoYWRvdz1nZW5TaGFkb3coclBvcytub3JtYWwqMC4wMDEsbGlnaHRQb3MpOycsJyAgICAgICAgICAgIGNvbG9yPShjb2xvcip2ZWMzKGNsYW1wKGRvdChsaWdodFBvcyxub3JtYWwpLDAuMCwxLjApKStzcGVjdWxhcithbWJpZW50Q29sb3IpKm1heCgwLjUsc2hhZG93KStyTGVuLzEwMC4wKjAuODsnLCcgICAgICAgICAgICBicmVhazsnLCcgICAgICAgIH0nLCcgICAgICAgIHJMZW4rPWRpc3RhbmNlOycsJyAgICAgICAgclBvcz1vcmlnaW4rckxlbipyYXk7JywnICAgICAgICBpZihyTGVuPm1heERpc3QpeycsJyAgICAgICAgICAgIGJyZWFrOycsJyAgICAgICAgfScsJyAgICB9JywnICAgICAgICByZXR1cm4gY29sb3I7JywnICAgICcsJ30nLCd2b2lkIG1haW4odm9pZCl7JywnICAgIHZlYzIgcCA9IChnbF9GcmFnQ29vcmQueHkgKiAyLjAgLSByZXNvbHV0aW9uKSAvIG1pbihyZXNvbHV0aW9uLngsIHJlc29sdXRpb24ueSk7ICAgICcsJyAgICBjb25zdCB2ZWMzIGNTaWRlPWNyb3NzKGNEaXIsY1VwKTsnLCcgICAgY29uc3QgZmxvYXQgdGFyZ2V0RGVwdGg9MS4wOycsJyAgICB2ZWMzIHJheT1ub3JtYWxpemUoY1NpZGUqcC54K2NVcCpwLnkrY0Rpcip0YXJnZXREZXB0aCk7JywnICAgIHZlYzMgb3JpZ2luPWNQb3M7JywnICAgIHZlYzMgZGVzdENvbG9yPXZlYzMoMC4wKTsnLCcgICAgdmVjMyBhbHBoYT12ZWMzKDAuNywwLjcsMC42Nyk7JywnICAgIGZvcihpbnQgaT0wO2k8MztpKyspeycsJyAgICAgICAgZGVzdENvbG9yKz1hbHBoYSpnZXRSYXlDb2xvcihyYXksb3JpZ2luKTsnLCcgICAgICAgIGFscGhhKj0wLjc7JywnICAgIH0nLCcgICAgZ2xfRnJhZ0NvbG9yPXZlYzQoZGVzdENvbG9yLDEuMCk7JywnfSddLmpvaW4oJ1xcbicpKX0iLCJ2YXIgcmVmcyA9IDA7XG52YXIgZGlzcG9zZTtcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbmlmKGNvbnRlbnQubG9jYWxzKSBleHBvcnRzLmxvY2FscyA9IGNvbnRlbnQubG9jYWxzO1xuXG5leHBvcnRzLnVzZSA9IGV4cG9ydHMucmVmID0gZnVuY3Rpb24oKSB7XG5cdGlmKCEocmVmcysrKSkge1xuXHRcdGRpc3Bvc2UgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7XCJobXJcIjp0cnVlfSk7XG5cdH1cblxuXHRyZXR1cm4gZXhwb3J0cztcbn07XG5cbmV4cG9ydHMudW51c2UgPSBleHBvcnRzLnVucmVmID0gZnVuY3Rpb24oKSB7XG4gIGlmKHJlZnMgPiAwICYmICEoLS1yZWZzKSkge1xuXHQgICBkaXNwb3NlKCk7XG5cdFx0IGRpc3Bvc2UgPSBudWxsO1xuICB9XG59O1xuaWYobW9kdWxlLmhvdCkge1xuXHR2YXIgbGFzdFJlZnMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLnJlZnMgfHwgMDtcblxuXHRpZihsYXN0UmVmcykge1xuXHRcdGV4cG9ydHMucmVmKCk7XG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRyZWZzID0gbGFzdFJlZnM7XG5cdFx0fVxuXHR9XG5cblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoKTtcblx0fVxuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdFx0ZGF0YS5yZWZzID0gY29udGVudC5sb2NhbHMgPyAwIDogcmVmcztcblxuXHRcdGlmKGRpc3Bvc2UpIHtcblx0XHRcdGRpc3Bvc2UoKTtcblx0XHR9XG5cdH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keSB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjsgfVxcblxcbiNyb290IHtcXG4gIGZvbnQtc2l6ZTogMDsgfVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiJdLCJzb3VyY2VSb290IjoiIn0=