(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{73:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),o=n(3),a=n.n(o),c=n(4),s=n.n(c),l=n(5),u=n.n(l),f=n(6),h=n.n(f),d=n(0),v=n.n(d),m=n(24),p=n.n(m),g=n(954),R=n.n(g),F=n(955),w=n.n(F),A=function(e,t,n,i){var r=function(e,n){var i=t.createShader(n);if(t.shaderSource(i,e),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))return i;alert(t.getShaderInfoLog(i)),console.log(t.getShaderInfoLog(i))},o=function(e,n){var i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?(t.useProgram(i),i):null}(r(n,t.VERTEX_SHADER),r(i,t.FRAGMENT_SHADER)),a=[];a[0]=t.getUniformLocation(o,"time"),a[1]=t.getUniformLocation(o,"resolution");var c,s,l=[0,2,1,1,2,3],u=[],f=[],h=(c=[-1,1,0,1,1,0,-1,-1,0,1,-1,0],s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),s);u[0]=t.getAttribLocation(o,"position"),f[0]=3;var d=function(e){var n=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Int16Array(e),t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),n}(l);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d),t.clearColor(1,0,0,1);var v=(new Date).getTime();return function(){var n,i;t.clear(t.COLOR_BUFFER_BIT),t.uniform1f(a[0],.001*((new Date).getTime()-v)),t.uniform2fv(a[1],[e.width,e.height]),n=u,i=f,[h].forEach(function(e,r,o){t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n[r]),t.vertexAttribPointer(n[r],i[r],t.FLOAT,!1,0,0)}),t.drawElements(t.TRIANGLES,l.length,t.UNSIGNED_SHORT,0),t.flush()}},E=function(e){function t(e){var n;return r()(this,t),(n=s()(this,u()(t).call(this,e))).requestId=0,n}return h()(t,e),a()(t,[{key:"componentDidMount",value:function(){this.updateCanvas()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.requestId)}},{key:"updateCanvas",value:function(){var e=this;this.canvas.width=this.props.style.width,this.canvas.height=this.props.style.height,this.gl=this.canvas.getContext("webgl");var t=A(this.canvas,this.gl,R()(),w()());!function n(){t(),e.requestId=requestAnimationFrame(n)}()}},{key:"handleResize",value:function(e,t){this.canvas.width=e,this.canvas.height=t,this.gl.viewport(0,0,e,t)}},{key:"render",value:function(){var e=this;return v.a.createElement("canvas",p()({},this.props,{ref:function(t){e.canvas=t}}))}}]),t}(v.a.Component),b=n(956),y=n.n(b);n.d(t,"default",function(){return x});var x=function(e){function t(e){var n;return r()(this,t),(n=s()(this,u()(t).call(this,e))).state={width:window.innerWidth,height:window.innerHeight},n}return h()(t,e),a()(t,[{key:"componentDidMount",value:function(){y.a.use(),this.tempHandleResize=this.handleResize.bind(this),window.addEventListener("resize",this.tempHandleResize)}},{key:"componentWillUnmount",value:function(){y.a.unuse(),window.removeEventListener("resize",this.tempHandleResize)}},{key:"handleResize",value:function(e){var t=e.target.innerWidth,n=e.target.innerHeight;this.refs.createCanvas.handleResize(t,n),this.setState({width:t,height:n})}},{key:"render",value:function(){return v.a.createElement(E,{ref:"createCanvas",style:{width:this.state.width,height:this.state.height}})}}]),t}(v.a.Component)},954:function(e,t){e.exports=function(){return["attribute vec3 position;","void main(void){","    gl_Position = vec4(position, 1.0);","}"].join("\n")}},955:function(e,t){e.exports=function(){return["    precision mediump float;","    uniform float time;","    uniform vec2 resolution;    ","    float random(vec2 p){","        return fract(sin(dot(p.xy,vec2(12.9898,78.233)))*43758.5453123)*2.0-1.0;","    }","    float random(float p){","        return fract(sin(p*43758.5453123));","    }","    float boxDistFunc(vec3 p,vec3 b,vec3 c){","        return length(max(abs(p-c)-b,0.0));","    }","    float floorDistFunc(vec3 p){","        vec3 q=p;","        q.xz=mod(p.xz,1.0)-0.5;","        float width=clamp(sin(-length(floor(p.xz)/2.0)+time*4.0)*0.48,0.2,0.48);","        float height=4.0*(abs(sin(time*2.0))+1.0)+width*10.0+length(floor(p.xz))/8.0;","        return boxDistFunc(q,vec3(width,height","        ,width),vec3(0.0,0.0,0.0));","    }","    float distFunc(vec3 p){","        return floorDistFunc(p);","    }","    vec3 genNormal(vec3 p){","        float d=0.001;","        return normalize(vec3(","            distFunc(p+vec3(d,0.0,0.0))-distFunc(p+vec3(-d,0.0,0.0)),","            distFunc(p+vec3(0.0,d,0.0))-distFunc(p+vec3(0.0,-d,0.0)),","            distFunc(p+vec3(0.0,0.0,d))-distFunc(p+vec3(0.0,0.0,-d))","            ));","    }","    vec3 getRayColor(inout vec3 ray,inout vec3 origin,out bool hit){","        float distance=0.0;","        float rLen=0.0;","        vec3 rPos=origin;","        vec3 color=vec3(1.0);","        float maxDist=1000.0;","        float marchCount=0.0;","        for(int i=0;i<150;i++){","            distance=distFunc(rPos);","            if(abs(distance)<0.01){","                if(distance==floorDistFunc(rPos)){","                    color=vec3(0.7-0.1*abs(sin(length(floor(rPos.xz))/2.0+time)),1.0-0.7*abs(sin(length(floor(rPos.xz))/3.0+time)),0.9-0.2*abs(sin(length(floor(rPos.xz))+time)));","                }","                break;","            }","            rLen += min(min((step(0.0,ray.x)-fract(rPos.x))/ray.x, (step(0.0,ray.z)-fract(rPos.z))/ray.z)+0.01,distance);","            ","            rPos=origin+rLen*ray;","            if(rLen>maxDist){","                break;","            }","            marchCount++;","        }","        hit=false;","    if(abs(distance)<0.01){","        color+=marchCount/100.0/pow(rLen,2.0);","        vec3 normal=genNormal(rPos);","        origin=rPos+normal*0.02;","        ray=normalize(reflect(ray,normal));","        hit=true;","    }","        return color;","    }","    vec3 pixelColor(vec2 p){","        vec3 cPos=vec3(cos(time)*2.0,19.0+cos(time/3.0)*5.0,-5.0+sin(time/2.0)*5.0);","        vec3 cDir=vec3(sin(time/5.0),-0.5+0.3*cos(time),1.0);","        vec3 cUp=mat3(1.0,0.0,0.0,","                      0.0,0.0,-1.0,","                      0.0,1.0,0.0)*cDir;","        vec3 cSide=cross(cDir,cUp);","        float depth=1.0;","        vec3 ray=normalize(cSide*p.x+cUp*p.y+cDir*depth);","        vec3 origin=cPos;","        vec3 color=vec3(0.0);","        float alpha=242.0/255.0;","        bool hit;","        for(int i=0;i<3;i++){","            color+=alpha*getRayColor(ray,origin,hit);","            alpha*=0.2;","            if(!hit)break;","        }","       return color;","    }","    ","    void main(void){","        vec2 p = (gl_FragCoord.xy * 2.0 - resolution) / min(resolution.x, resolution.y);","        vec3 color=pixelColor(p);","        gl_FragColor=vec4(color,1.0);","    }"].join("\n")}},956:function(e,t,n){var i,r=0,o=n(957);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(t.locals=o.locals),t.use=t.ref=function(){return r++||(i=n(23)(o,{hmr:!0})),t},t.unuse=t.unref=function(){r>0&&!--r&&(i(),i=null)}},957:function(e,t,n){(e.exports=n(22)(!1)).push([e.i,"body {\n  margin: 0;\n  padding: 0;\n  overflow: hidden; }\n\n#root {\n  font-size: 0; }\n",""])}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcml2ZXJSaXBwbGUvY3JlYXRlQ2FudmFzLmpzeCIsIndlYnBhY2s6Ly8vLi9zcmMvcml2ZXJSaXBwbGUvbWFpbi5qc3giLCJ3ZWJwYWNrOi8vLy4vc3JjL3JpdmVyUmlwcGxlL3ZlcnRleFNoYWRlci5nbHNsIiwid2VicGFjazovLy8uL3NyYy9yaXZlclJpcHBsZS9mcmFnbWVudFNoYWRlci5nbHNsIiwid2VicGFjazovLy8uL3NyYy9yaXZlclJpcHBsZS9zdHlsZS5zY3NzP2RkN2QiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JpdmVyUmlwcGxlL3N0eWxlLnNjc3MiXSwibmFtZXMiOlsid2ViR0xTdGFydCIsImNhbnZhcyIsImdsIiwidnMiLCJmcyIsImNyZWF0ZV9zaGFkZXIiLCJ0ZXh0IiwidHlwZSIsInNoYWRlciIsImNyZWF0ZVNoYWRlciIsInNoYWRlclNvdXJjZSIsImNvbXBpbGVTaGFkZXIiLCJnZXRTaGFkZXJQYXJhbWV0ZXIiLCJDT01QSUxFX1NUQVRVUyIsImFsZXJ0IiwiZ2V0U2hhZGVySW5mb0xvZyIsImNvbnNvbGUiLCJsb2ciLCJwcmciLCJwcm9ncmFtIiwiY3JlYXRlUHJvZ3JhbSIsImF0dGFjaFNoYWRlciIsImxpbmtQcm9ncmFtIiwiZ2V0UHJvZ3JhbVBhcmFtZXRlciIsIkxJTktfU1RBVFVTIiwidXNlUHJvZ3JhbSIsImNyZWF0ZV9wcm9ncmFtIiwiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiIsInVuaUxvY2F0aW9uIiwiZ2V0VW5pZm9ybUxvY2F0aW9uIiwiZGF0YSIsInZibyIsImluZGV4IiwiYXR0TG9jYXRpb24iLCJhdHRTdHJpZGUiLCJ2UG9zaXRpb24iLCJjcmVhdGVCdWZmZXIiLCJiaW5kQnVmZmVyIiwiQVJSQVlfQlVGRkVSIiwiYnVmZmVyRGF0YSIsIkZsb2F0MzJBcnJheSIsIlNUQVRJQ19EUkFXIiwiZ2V0QXR0cmliTG9jYXRpb24iLCJ2SW5kZXgiLCJpYm8iLCJFTEVNRU5UX0FSUkFZX0JVRkZFUiIsIkludDE2QXJyYXkiLCJjcmVhdGVfaWJvIiwiY2xlYXJDb2xvciIsInN0YXJ0VGltZSIsIkRhdGUiLCJnZXRUaW1lIiwiYXR0TCIsImF0dFMiLCJjbGVhciIsIkNPTE9SX0JVRkZFUl9CSVQiLCJ1bmlmb3JtMWYiLCJ1bmlmb3JtMmZ2Iiwid2lkdGgiLCJoZWlnaHQiLCJmb3JFYWNoIiwiZSIsImkiLCJhIiwiZW5hYmxlVmVydGV4QXR0cmliQXJyYXkiLCJ2ZXJ0ZXhBdHRyaWJQb2ludGVyIiwiRkxPQVQiLCJkcmF3RWxlbWVudHMiLCJUUklBTkdMRVMiLCJsZW5ndGgiLCJVTlNJR05FRF9TSE9SVCIsImZsdXNoIiwiQ3JlYXRlQ2FudmFzIiwicHJvcHMiLCJfdGhpcyIsImNsYXNzQ2FsbENoZWNrX2RlZmF1bHQiLCJ0aGlzIiwicG9zc2libGVDb25zdHJ1Y3RvclJldHVybl9kZWZhdWx0IiwiZ2V0UHJvdG90eXBlT2ZfZGVmYXVsdCIsImNhbGwiLCJyZXF1ZXN0SWQiLCJ1cGRhdGVDYW52YXMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIl90aGlzMiIsInN0eWxlIiwiZ2V0Q29udGV4dCIsInJlbmRlciIsInZlcnQiLCJmcmFnIiwibG9vcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInciLCJoIiwidmlld3BvcnQiLCJfdGhpczMiLCJyZWFjdF9kZWZhdWx0IiwiY3JlYXRlRWxlbWVudCIsImV4dGVuZHNfZGVmYXVsdCIsInJlZiIsIlJlYWN0IiwiQ29tcG9uZW50IiwiUml2ZXJSaXBwbGUiLCJzdGF0ZSIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInVzZSIsInRlbXBIYW5kbGVSZXNpemUiLCJoYW5kbGVSZXNpemUiLCJiaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsInVudXNlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsInJlZnMiLCJjcmVhdGVDYW52YXMiLCJzZXRTdGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJqb2luIiwiZGlzcG9zZSIsImNvbnRlbnQiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibG9jYWxzIiwiaG1yIiwidW5yZWYiLCJwdXNoIl0sIm1hcHBpbmdzIjoiMFBBR01BLEVBQWEsU0FBQ0MsRUFBUUMsRUFBSUMsRUFBSUMsR0FDbEMsSUFZTUMsRUFBZ0IsU0FBQ0MsRUFBTUMsR0FDM0IsSUFBTUMsRUFBU04sRUFBR08sYUFBYUYsR0FHL0IsR0FGQUwsRUFBR1EsYUFBYUYsRUFBUUYsR0FDeEJKLEVBQUdTLGNBQWNILEdBQ2JOLEVBQUdVLG1CQUFtQkosRUFBUU4sRUFBR1csZ0JBQ25DLE9BQU9MLEVBRVBNLE1BQU1aLEVBQUdhLGlCQUFpQlAsSUFDMUJRLFFBQVFDLElBQUlmLEVBQUdhLGlCQUFpQlAsS0E0QjlCVSxFQWhEaUIsU0FBQ2YsRUFBSUMsR0FDMUIsSUFBTWUsRUFBVWpCLEVBQUdrQixnQkFJbkIsT0FIQWxCLEVBQUdtQixhQUFhRixFQUFTaEIsR0FDekJELEVBQUdtQixhQUFhRixFQUFTZixHQUN6QkYsRUFBR29CLFlBQVlILEdBQ1hqQixFQUFHcUIsb0JBQW9CSixFQUFTakIsRUFBR3NCLGNBQ3JDdEIsRUFBR3VCLFdBQVdOLEdBQ1BBLEdBRUEsS0F1Q0NPLENBQ1ZyQixFQUFjRixFQUFJRCxFQUFHeUIsZUFDckJ0QixFQUFjRCxFQUFJRixFQUFHMEIsa0JBRWpCQyxFQUFjLEdBQ3BCQSxFQUFZLEdBQUszQixFQUFHNEIsbUJBQW1CWixFQUFLLFFBQzVDVyxFQUFZLEdBQUszQixFQUFHNEIsbUJBQW1CWixFQUFLLGNBRTVDLElBakNtQmEsRUFDWEMsRUE4Q0ZDLEVBQVEsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FDeEJDLEVBQWMsR0FDZEMsRUFBWSxHQUVaQyxHQW5EYUwsRUFpQ0YsRUFDZCxFQUNELEVBQ0EsRUFDQSxFQUNBLEVBQ0EsR0FDQyxHQUNBLEVBQ0QsRUFDQSxHQUNDLEVBQ0QsR0E1Q01DLEVBQU05QixFQUFHbUMsZUFDZm5DLEVBQUdvQyxXQUFXcEMsRUFBR3FDLGFBQWNQLEdB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c0NBQXNDLDJCQUEyQiw0REFBNEQsNEJBQTRCLGdDQUFnQyxtQ0FBbUMsb0JBQW9CLGdDQUFnQyx3REFBd0QsMEJBQTBCLDZCQUE2QixZQUFZLHVCQUF1QixRQUFRLDhCQUE4QiwyRkFBMkYsb0NBQW9DLHdDQUF3QyxTQUFRQyxLQUFBLDRCQ0E5d0csSUFDQUMsRUFEQU4sRUFBQSxFQUVBTyxFQUFjQyxFQUFRLEtBRXRCLGlCQUFBRCxNQUFBLEVBQTRDSixFQUFBdkQsRUFBUzJELEVBQUEsTUFDckRBLEVBQUFFLFNBQUFMLEVBQUFLLE9BQUFGLEVBQUFFLFFBRUFMLEVBQUFaLElBQUFZLEVBQUFwQixJQUFBLFdBS0EsT0FKQWdCLE1BQ0FNLEVBQVlFLEVBQVEsR0FBUkEsQ0FBMkRELEVBQUEsQ0FBWUcsS0FBQSxLQUduRk4sR0FHQUEsRUFBQVAsTUFBQU8sRUFBQU8sTUFBQSxXQUNBWCxFQUFBLE1BQUFBLElBQ0FNLElBQ0FBLEVBQUEsNkJDbEJBSCxFQUFBQyxRQUEyQkksRUFBUSxHQUFSQSxFQUF1RCxJQUtsRkksS0FBQSxDQUFjVCxFQUFBdkQsRUFBUyw2RkFBMkYiLCJmaWxlIjoiMTguYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHZlcnQgZnJvbSBcIi4vdmVydGV4U2hhZGVyLmdsc2xcIjtcbmltcG9ydCBmcmFnIGZyb20gXCIuL2ZyYWdtZW50U2hhZGVyLmdsc2xcIjtcbmNvbnN0IHdlYkdMU3RhcnQgPSAoY2FudmFzLCBnbCwgdnMsIGZzKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZV9wcm9ncmFtID0gKHZzLCBmcykgPT4ge1xuICAgIGNvbnN0IHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7XG4gICAgZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZzKTtcbiAgICBnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnMpO1xuICAgIGdsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuICAgIGlmIChnbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIGdsLkxJTktfU1RBVFVTKSkge1xuICAgICAgZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTtcbiAgICAgIHJldHVybiBwcm9ncmFtO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG4gIGNvbnN0IGNyZWF0ZV9zaGFkZXIgPSAodGV4dCwgdHlwZSkgPT4ge1xuICAgIGNvbnN0IHNoYWRlciA9IGdsLmNyZWF0ZVNoYWRlcih0eXBlKTtcbiAgICBnbC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCB0ZXh0KTtcbiAgICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG4gICAgaWYgKGdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkge1xuICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpKTtcbiAgICAgIGNvbnNvbGUubG9nKGdsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVfdmJvID0gZGF0YSA9PiB7XG4gICAgY29uc3QgdmJvID0gZ2wuY3JlYXRlQnVmZmVyKCk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIHZibyk7XG4gICAgZ2wuYnVmZmVyRGF0YShnbC5BUlJBWV9CVUZGRVIsIG5ldyBGbG9hdDMyQXJyYXkoZGF0YSksIGdsLlNUQVRJQ19EUkFXKTtcbiAgICBnbC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgbnVsbCk7XG4gICAgcmV0dXJuIHZibztcbiAgfTtcbiAgY29uc3QgY3JlYXRlX2libyA9IGRhdGEgPT4ge1xuICAgIGNvbnN0IGlibyA9IGdsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGlibyk7XG4gICAgZ2wuYnVmZmVyRGF0YShcbiAgICAgIGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLFxuICAgICAgbmV3IEludDE2QXJyYXkoZGF0YSksXG4gICAgICBnbC5TVEFUSUNfRFJBV1xuICAgICk7XG4gICAgZ2wuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgbnVsbCk7XG4gICAgcmV0dXJuIGlibztcbiAgfTtcbiAgY29uc3Qgc2V0X2F0dHJpYnV0ZSA9ICh2Ym8sIGF0dEwsIGF0dFMpID0+IHtcbiAgICB2Ym8uZm9yRWFjaCgoZSwgaSwgYSkgPT4ge1xuICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGUpO1xuICAgICAgZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYXR0TFtpXSk7XG4gICAgICBnbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGF0dExbaV0sIGF0dFNbaV0sIGdsLkZMT0FULCBmYWxzZSwgMCwgMCk7XG4gICAgfSk7XG4gIH07XG4gIGNvbnN0IHByZyA9IGNyZWF0ZV9wcm9ncmFtKFxuICAgIGNyZWF0ZV9zaGFkZXIodnMsIGdsLlZFUlRFWF9TSEFERVIpLFxuICAgIGNyZWF0ZV9zaGFkZXIoZnMsIGdsLkZSQUdNRU5UX1NIQURFUilcbiAgKTtcbiAgY29uc3QgdW5pTG9jYXRpb24gPSBbXTtcbiAgdW5pTG9jYXRpb25bMF0gPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJnLCBcInRpbWVcIik7XG4gIHVuaUxvY2F0aW9uWzFdID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByZywgXCJyZXNvbHV0aW9uXCIpO1xuXG4gIGNvbnN0IHBvc2l0aW9uID0gW1xuICAgIC0xLjAsXG4gICAgMS4wLFxuICAgIDAuMCxcbiAgICAxLjAsXG4gICAgMS4wLFxuICAgIDAuMCxcbiAgICAtMS4wLFxuICAgIC0xLjAsXG4gICAgMC4wLFxuICAgIDEuMCxcbiAgICAtMS4wLFxuICAgIDAuMFxuICBdO1xuICBjb25zdCBpbmRleCA9IFswLCAyLCAxLCAxLCAyLCAzXTtcbiAgY29uc3QgYXR0TG9jYXRpb24gPSBbXTtcbiAgY29uc3QgYXR0U3RyaWRlID0gW107XG5cbiAgY29uc3QgdlBvc2l0aW9uID0gY3JlYXRlX3Zibyhwb3NpdGlvbik7XG4gIGF0dExvY2F0aW9uWzBdID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJnLCBcInBvc2l0aW9uXCIpO1xuICBhdHRTdHJpZGVbMF0gPSAzO1xuXG4gIGNvbnN0IHZJbmRleCA9IGNyZWF0ZV9pYm8oaW5kZXgpO1xuICBnbC5iaW5kQnVmZmVyKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCB2SW5kZXgpO1xuXG4gIGdsLmNsZWFyQ29sb3IoMS4wLCAwLjAsIDAuMCwgMS4wKTtcblxuICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgY29uc3QgcmVuZGVyID0gKCkgPT4ge1xuICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpO1xuICAgIGdsLnVuaWZvcm0xZih1bmlMb2NhdGlvblswXSwgKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lKSAqIDAuMDAxKTtcbiAgICBnbC51bmlmb3JtMmZ2KHVuaUxvY2F0aW9uWzFdLCBbY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0XSk7XG4gICAgc2V0X2F0dHJpYnV0ZShbdlBvc2l0aW9uXSwgYXR0TG9jYXRpb24sIGF0dFN0cmlkZSk7XG4gICAgZ2wuZHJhd0VsZW1lbnRzKGdsLlRSSUFOR0xFUywgaW5kZXgubGVuZ3RoLCBnbC5VTlNJR05FRF9TSE9SVCwgMCk7XG4gICAgZ2wuZmx1c2goKTsgICAgXG4gIH07XG4gIHJldHVybiByZW5kZXI7XG59O1xuXG5cbmNsYXNzIENyZWF0ZUNhbnZhcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMucmVxdWVzdElkPTA7XG4gIH1cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVDYW52YXMoKTtcbiAgfVxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpe1xuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmVxdWVzdElkKTtcbiAgfVxuICB1cGRhdGVDYW52YXMoKSB7ICAgIFxuICAgIHRoaXMuY2FudmFzLndpZHRoID0gdGhpcy5wcm9wcy5zdHlsZS53aWR0aDtcbiAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLnByb3BzLnN0eWxlLmhlaWdodDtcbiAgICB0aGlzLmdsID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xuICAgIGNvbnN0IHJlbmRlcj13ZWJHTFN0YXJ0KHRoaXMuY2FudmFzLHRoaXMuZ2wsdmVydCgpLGZyYWcoKSk7XG4gICAgY29uc3QgbG9vcD0oKT0+e1xuICAgICAgcmVuZGVyKCk7XG4gICAgICB0aGlzLnJlcXVlc3RJZD1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7XG4gICAgfVxuICAgIGxvb3AoKTtcbiAgfVxuICBoYW5kbGVSZXNpemUodyxoKXtcbiAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHc7XG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaDtcbiAgICB0aGlzLmdsLnZpZXdwb3J0KDAsMCx3LGgpOyAgICAgICAgXG4gIH0gIFxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxjYW52YXNcbiAgICAgICAgey4uLnRoaXMucHJvcHN9XG4gICAgICAgIHJlZj17ZSA9PiB7XG4gICAgICAgICAgdGhpcy5jYW52YXMgPSBlO1xuICAgICAgICB9fVxuICAgICAgLz5cbiAgICApO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBDcmVhdGVDYW52YXM7XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IENyZWF0ZUNhbnZhcyBmcm9tICcuL2NyZWF0ZUNhbnZhcy5qc3gnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4vc3R5bGUuc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJpdmVyUmlwcGxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHdpZHRoOiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0XG4gICAgfTtcbiAgfVxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBzdHlsZS51c2UoKTtcbiAgICB0aGlzLnRlbXBIYW5kbGVSZXNpemUgPSB0aGlzLmhhbmRsZVJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnRlbXBIYW5kbGVSZXNpemUpO1xuICB9XG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHN0eWxlLnVudXNlKCk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudGVtcEhhbmRsZVJlc2l6ZSk7XG4gIH1cbiAgaGFuZGxlUmVzaXplKGUpIHtcbiAgICBjb25zdCB3aWR0aCA9IGUudGFyZ2V0LmlubmVyV2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gZS50YXJnZXQuaW5uZXJIZWlnaHQ7XG4gICAgdGhpcy5yZWZzLmNyZWF0ZUNhbnZhcy5oYW5kbGVSZXNpemUod2lkdGgsIGhlaWdodCk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH0pO1xuICB9XG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPENyZWF0ZUNhbnZhc1xuICAgICAgICByZWY9J2NyZWF0ZUNhbnZhcydcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICB3aWR0aDogdGhpcy5zdGF0ZS53aWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0XG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICk7XG4gIH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtyZXR1cm4oWydhdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjsnLCd2b2lkIG1haW4odm9pZCl7JywnICAgIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMS4wKTsnLCd9J10uam9pbignXFxuJykpfSIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKXtyZXR1cm4oWycgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7JywnICAgIHVuaWZvcm0gZmxvYXQgdGltZTsnLCcgICAgdW5pZm9ybSB2ZWMyIHJlc29sdXRpb247ICAgICcsJyAgICBmbG9hdCByYW5kb20odmVjMiBwKXsnLCcgICAgICAgIHJldHVybiBmcmFjdChzaW4oZG90KHAueHksdmVjMigxMi45ODk4LDc4LjIzMykpKSo0Mzc1OC41NDUzMTIzKSoyLjAtMS4wOycsJyAgICB9JywnICAgIGZsb2F0IHJhbmRvbShmbG9hdCBwKXsnLCcgICAgICAgIHJldHVybiBmcmFjdChzaW4ocCo0Mzc1OC41NDUzMTIzKSk7JywnICAgIH0nLCcgICAgZmxvYXQgYm94RGlzdEZ1bmModmVjMyBwLHZlYzMgYix2ZWMzIGMpeycsJyAgICAgICAgcmV0dXJuIGxlbmd0aChtYXgoYWJzKHAtYyktYiwwLjApKTsnLCcgICAgfScsJyAgICBmbG9hdCBmbG9vckRpc3RGdW5jKHZlYzMgcCl7JywnICAgICAgICB2ZWMzIHE9cDsnLCcgICAgICAgIHEueHo9bW9kKHAueHosMS4wKS0wLjU7JywnICAgICAgICBmbG9hdCB3aWR0aD1jbGFtcChzaW4oLWxlbmd0aChmbG9vcihwLnh6KS8yLjApK3RpbWUqNC4wKSowLjQ4LDAuMiwwLjQ4KTsnLCcgICAgICAgIGZsb2F0IGhlaWdodD00LjAqKGFicyhzaW4odGltZSoyLjApKSsxLjApK3dpZHRoKjEwLjArbGVuZ3RoKGZsb29yKHAueHopKS84LjA7JywnICAgICAgICByZXR1cm4gYm94RGlzdEZ1bmMocSx2ZWMzKHdpZHRoLGhlaWdodCcsJyAgICAgICAgLHdpZHRoKSx2ZWMzKDAuMCwwLjAsMC4wKSk7JywnICAgIH0nLCcgICAgZmxvYXQgZGlzdEZ1bmModmVjMyBwKXsnLCcgICAgICAgIHJldHVybiBmbG9vckRpc3RGdW5jKHApOycsJyAgICB9JywnICAgIHZlYzMgZ2VuTm9ybWFsKHZlYzMgcCl7JywnICAgICAgICBmbG9hdCBkPTAuMDAxOycsJyAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZSh2ZWMzKCcsJyAgICAgICAgICAgIGRpc3RGdW5jKHArdmVjMyhkLDAuMCwwLjApKS1kaXN0RnVuYyhwK3ZlYzMoLWQsMC4wLDAuMCkpLCcsJyAgICAgICAgICAgIGRpc3RGdW5jKHArdmVjMygwLjAsZCwwLjApKS1kaXN0RnVuYyhwK3ZlYzMoMC4wLC1kLDAuMCkpLCcsJyAgICAgICAgICAgIGRpc3RGdW5jKHArdmVjMygwLjAsMC4wLGQpKS1kaXN0RnVuYyhwK3ZlYzMoMC4wLDAuMCwtZCkpJywnICAgICAgICAgICAgKSk7JywnICAgIH0nLCcgICAgdmVjMyBnZXRSYXlDb2xvcihpbm91dCB2ZWMzIHJheSxpbm91dCB2ZWMzIG9yaWdpbixvdXQgYm9vbCBoaXQpeycsJyAgICAgICAgZmxvYXQgZGlzdGFuY2U9MC4wOycsJyAgICAgICAgZmxvYXQgckxlbj0wLjA7JywnICAgICAgICB2ZWMzIHJQb3M9b3JpZ2luOycsJyAgICAgICAgdmVjMyBjb2xvcj12ZWMzKDEuMCk7JywnICAgICAgICBmbG9hdCBtYXhEaXN0PTEwMDAuMDsnLCcgICAgICAgIGZsb2F0IG1hcmNoQ291bnQ9MC4wOycsJyAgICAgICAgZm9yKGludCBpPTA7aTwxNTA7aSsrKXsnLCcgICAgICAgICAgICBkaXN0YW5jZT1kaXN0RnVuYyhyUG9zKTsnLCcgICAgICAgICAgICBpZihhYnMoZGlzdGFuY2UpPDAuMDEpeycsJyAgICAgICAgICAgICAgICBpZihkaXN0YW5jZT09Zmxvb3JEaXN0RnVuYyhyUG9zKSl7JywnICAgICAgICAgICAgICAgICAgICBjb2xvcj12ZWMzKDAuNy0wLjEqYWJzKHNpbihsZW5ndGgoZmxvb3IoclBvcy54eikpLzIuMCt0aW1lKSksMS4wLTAuNyphYnMoc2luKGxlbmd0aChmbG9vcihyUG9zLnh6KSkvMy4wK3RpbWUpKSwwLjktMC4yKmFicyhzaW4obGVuZ3RoKGZsb29yKHJQb3MueHopKSt0aW1lKSkpOycsJyAgICAgICAgICAgICAgICB9JywnICAgICAgICAgICAgICAgIGJyZWFrOycsJyAgICAgICAgICAgIH0nLCcgICAgICAgICAgICByTGVuICs9IG1pbihtaW4oKHN0ZXAoMC4wLHJheS54KS1mcmFjdChyUG9zLngpKS9yYXkueCwgKHN0ZXAoMC4wLHJheS56KS1mcmFjdChyUG9zLnopKS9yYXkueikrMC4wMSxkaXN0YW5jZSk7JywnICAgICAgICAgICAgJywnICAgICAgICAgICAgclBvcz1vcmlnaW4rckxlbipyYXk7JywnICAgICAgICAgICAgaWYockxlbj5tYXhEaXN0KXsnLCcgICAgICAgICAgICAgICAgYnJlYWs7JywnICAgICAgICAgICAgfScsJyAgICAgICAgICAgIG1hcmNoQ291bnQrKzsnLCcgICAgICAgIH0nLCcgICAgICAgIGhpdD1mYWxzZTsnLCcgICAgaWYoYWJzKGRpc3RhbmNlKTwwLjAxKXsnLCcgICAgICAgIGNvbG9yKz1tYXJjaENvdW50LzEwMC4wL3BvdyhyTGVuLDIuMCk7JywnICAgICAgICB2ZWMzIG5vcm1hbD1nZW5Ob3JtYWwoclBvcyk7JywnICAgICAgICBvcmlnaW49clBvcytub3JtYWwqMC4wMjsnLCcgICAgICAgIHJheT1ub3JtYWxpemUocmVmbGVjdChyYXksbm9ybWFsKSk7JywnICAgICAgICBoaXQ9dHJ1ZTsnLCcgICAgfScsJyAgICAgICAgcmV0dXJuIGNvbG9yOycsJyAgICB9JywnICAgIHZlYzMgcGl4ZWxDb2xvcih2ZWMyIHApeycsJyAgICAgICAgdmVjMyBjUG9zPXZlYzMoY29zKHRpbWUpKjIuMCwxOS4wK2Nvcyh0aW1lLzMuMCkqNS4wLC01LjArc2luKHRpbWUvMi4wKSo1LjApOycsJyAgICAgICAgdmVjMyBjRGlyPXZlYzMoc2luKHRpbWUvNS4wKSwtMC41KzAuMypjb3ModGltZSksMS4wKTsnLCcgICAgICAgIHZlYzMgY1VwPW1hdDMoMS4wLDAuMCwwLjAsJywnICAgICAgICAgICAgICAgICAgICAgIDAuMCwwLjAsLTEuMCwnLCcgICAgICAgICAgICAgICAgICAgICAgMC4wLDEuMCwwLjApKmNEaXI7JywnICAgICAgICB2ZWMzIGNTaWRlPWNyb3NzKGNEaXIsY1VwKTsnLCcgICAgICAgIGZsb2F0IGRlcHRoPTEuMDsnLCcgICAgICAgIHZlYzMgcmF5PW5vcm1hbGl6ZShjU2lkZSpwLngrY1VwKnAueStjRGlyKmRlcHRoKTsnLCcgICAgICAgIHZlYzMgb3JpZ2luPWNQb3M7JywnICAgICAgICB2ZWMzIGNvbG9yPXZlYzMoMC4wKTsnLCcgICAgICAgIGZsb2F0IGFscGhhPTI0Mi4wLzI1NS4wOycsJyAgICAgICAgYm9vbCBoaXQ7JywnICAgICAgICBmb3IoaW50IGk9MDtpPDM7aSsrKXsnLCcgICAgICAgICAgICBjb2xvcis9YWxwaGEqZ2V0UmF5Q29sb3IocmF5LG9yaWdpbixoaXQpOycsJyAgICAgICAgICAgIGFscGhhKj0wLjI7JywnICAgICAgICAgICAgaWYoIWhpdClicmVhazsnLCcgICAgICAgIH0nLCcgICAgICAgcmV0dXJuIGNvbG9yOycsJyAgICB9JywnICAgICcsJyAgICB2b2lkIG1haW4odm9pZCl7JywnICAgICAgICB2ZWMyIHAgPSAoZ2xfRnJhZ0Nvb3JkLnh5ICogMi4wIC0gcmVzb2x1dGlvbikgLyBtaW4ocmVzb2x1dGlvbi54LCByZXNvbHV0aW9uLnkpOycsJyAgICAgICAgdmVjMyBjb2xvcj1waXhlbENvbG9yKHApOycsJyAgICAgICAgZ2xfRnJhZ0NvbG9yPXZlYzQoY29sb3IsMS4wKTsnLCcgICAgfSddLmpvaW4oJ1xcbicpKX0iLCJ2YXIgcmVmcyA9IDA7XG52YXIgZGlzcG9zZTtcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9zdHlsZS5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbmlmKGNvbnRlbnQubG9jYWxzKSBleHBvcnRzLmxvY2FscyA9IGNvbnRlbnQubG9jYWxzO1xuXG5leHBvcnRzLnVzZSA9IGV4cG9ydHMucmVmID0gZnVuY3Rpb24oKSB7XG5cdGlmKCEocmVmcysrKSkge1xuXHRcdGRpc3Bvc2UgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7XCJobXJcIjp0cnVlfSk7XG5cdH1cblxuXHRyZXR1cm4gZXhwb3J0cztcbn07XG5cbmV4cG9ydHMudW51c2UgPSBleHBvcnRzLnVucmVmID0gZnVuY3Rpb24oKSB7XG4gIGlmKHJlZnMgPiAwICYmICEoLS1yZWZzKSkge1xuXHQgICBkaXNwb3NlKCk7XG5cdFx0IGRpc3Bvc2UgPSBudWxsO1xuICB9XG59O1xuaWYobW9kdWxlLmhvdCkge1xuXHR2YXIgbGFzdFJlZnMgPSBtb2R1bGUuaG90LmRhdGEgJiYgbW9kdWxlLmhvdC5kYXRhLnJlZnMgfHwgMDtcblxuXHRpZihsYXN0UmVmcykge1xuXHRcdGV4cG9ydHMucmVmKCk7XG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRyZWZzID0gbGFzdFJlZnM7XG5cdFx0fVxuXHR9XG5cblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoKTtcblx0fVxuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdFx0ZGF0YS5yZWZzID0gY29udGVudC5sb2NhbHMgPyAwIDogcmVmcztcblxuXHRcdGlmKGRpc3Bvc2UpIHtcblx0XHRcdGRpc3Bvc2UoKTtcblx0XHR9XG5cdH0pO1xufSIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keSB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjsgfVxcblxcbiNyb290IHtcXG4gIGZvbnQtc2l6ZTogMDsgfVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiJdLCJzb3VyY2VSb290IjoiIn0=